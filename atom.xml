<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Tit1e</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://github.com/Tit1e/"/>
  <updated>2020-12-31T14:09:26.978Z</updated>
  <id>https://github.com/Tit1e/</id>
  
  <author>
    <name>Tit1e</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ä½ å¥½å•Š 2021</title>
    <link href="https://github.com/Tit1e/2020/12/30/145-hello-2021/"/>
    <id>https://github.com/Tit1e/2020/12/30/145-hello-2021/</id>
    <published>2020-12-30T14:01:06.000Z</published>
    <updated>2020-12-31T14:09:26.978Z</updated>
    
    <content type="html"><![CDATA[<p>è™½ç„¶æ ‡é¢˜å†™çš„æ˜¯ 2021ï¼Œä½†å®é™…ä¸Šè¿™ç¯‡æ˜¯ 2020 å¹´çš„å›é¡¾ã€‚</p><p>å›é¡¾ 2020ï¼Œæ‰å‘ç°ç–«æƒ…å·²ç»ä¼´éšäº†æˆ‘ä¸€æ•´å¹´ï¼Œå¹´åˆé­é‡ç–«æƒ…æ—¶çš„ææ…Œæ˜æ˜è¿˜å†å†åœ¨ç›®ã€‚</p><p>å› ä¸ºç–«æƒ…ï¼Œç¬¬ä¸€æ¬¡ä½“éªŒäº†åœ¨å®¶åŠå…¬ã€‚è¿™å¯æ˜¯æ­£å„¿å…«ç»çš„åœ¨å®¶åŠå…¬ï¼Œä¸æ˜¯æˆ‘å¹³æ—¶è¯·äº†å‡ï¼Œç»“æœè¿˜æ˜¯è¢«åŒäº‹æ‰¾ä¸Šé—¨ç„¶ååœ¨å®¶æ”¹ bugã€‚2æœˆ19æ—¥è¿”å›æ­å·ï¼Œçœ‹è§äº†ä¸ä¸€æ ·çš„æ­å·ï¼Œå¹³å¸¸çƒ­é—¹çš„è¡—é“å†·å†·æ¸…æ¸…ï¼Œæ˜æ˜å·²ç»è¿‡äº†è¿”å·¥çš„æ—¥å­ï¼Œæ²¿è¡—çš„åº—é“ºå´éƒ½è¿˜ç´§ç´§é—­ç€ã€‚</p><p>å› ä¸ºç–«æƒ…ï¼Œå¹´åˆåŠ¨æ£®çš„å‘å”®ç›´æ¥è®©åŠ¨æ£®ä¸ switch ç«å‡ºäº†åœˆã€‚æˆ‘å¿ƒè¡€æ¥æ½®è¿˜å¼€å‘äº†ä¸€ä¸ªå°ç¨‹åºï¼Œä»æ•°æ®çˆ¬å–ï¼Œç•Œé¢è®¾è®¡ï¼Œåç«¯æœåŠ¡æ­å»ºï¼Œæ¥å£ç¼–å†™ï¼ŒåŸŸåç”³è¯·ç­‰ä¸€æ•´å¥—çš„éƒ¨ç½²æµç¨‹ï¼Œå…¨éƒ½è‡ªå·±ä¸€äººæŠ˜è…¾äº†ä¸ªéã€‚</p><p>æ•´ä¸ªè¿‡ç¨‹ä¸‹æ¥ï¼Œæ”¶è·é¢‡ä¸°ã€‚è¿™ä¸ªå°ç¨‹åºç”¨åˆ°çš„æŠ€æœ¯æ ˆï¼š</p><ul><li>uni-app</li><li>Node.js</li><li>Mysql</li><li>Nginx</li></ul><p><img src="https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-12-28-animalCrossingCode.jpg" alt></p><p>7æœˆ26æ—¥æˆ‘æ‹¿åˆ°äº†è‡ªå·±äººç”Ÿä¸­çš„ç¬¬ä¸€å°ç›¸æœºğŸ“·ï¼šé»‘è‰²çš„å¯Œå£«çš„ XT-20ã€‚è™½ç„¶æ˜¯äºŒæ‰‹ï¼Œè™½ç„¶æˆ‘æ›´æƒ³è¦é“¶è‰²ï¼Œä½†æˆ‘å¾ˆæ˜¯å¾ˆå–œæ¬¢å®ƒã€‚å‰æ®µæ—¶é—´åˆšä¸Šçº¿äº†æˆ‘çš„æ‘„å½±ç«™ï¼š<a href="https://album.animalcrossing.life/" target="_blank" rel="noopener">Tit1eâ€™s Photo Studio</a>ã€‚é¡¹ç›®ç«‹é¡¹å¾ˆæ—©ï¼Œä½†æ˜¯ä¸€ç›´æ‹–æ‹–æ‹‰æ‹‰ï¼Œå¥½åœ¨èµ¶ä¸Šäº† 2020 çš„å°¾å·´ã€‚</p><p>8æœˆä»½çš„æ—¶å€™ï¼Œè·Ÿå°ä¼™ä¼´å»äº†è¶Ÿæˆéƒ½ï¼Œ4å¤©ä¸‹æ¥ï¼Œæˆ‘æœ€å–œæ¬¢çš„åœ°æ–¹æ˜¯äººæ°‘å…¬å›­ã€‚ç‚¹æ¯èŒ¶ï¼Œå¯ä»¥åœ¨é‚£åä¸Šä¸€æ•´å¤©ã€‚æˆéƒ½çš„ç”Ÿæ´»èŠ‚å¥ï¼Œä»¤äººå‘å¾€ï¼Œå¯æƒœæˆ‘åªæ˜¯ä¸ªè¿‡å®¢ã€‚</p><p>æ•´å¹´ä¸‹æ¥ï¼Œæœ€é‡è¦çš„äº‹æ˜¯ 11æœˆåˆæ‘‡ä¸­äº†å·ï¼Œé‚£æ¬¡æ˜¯å¼€ç›˜ä»¥æ¥æ‘‡ä¸­æ¦‚ç‡æœ€ä½çš„ä¸€æ¬¡ã€‚é”€å”®å‘æ¶ˆæ¯æ­å–œæˆ‘çš„æ—¶å€™ï¼Œæˆ‘çš„å¿ƒæƒ…ä¸çŸ¥é“æ€ä¹ˆå½¢å®¹ï¼Œå¤§æ¦‚æ˜¯å¿§å¤§äºå–œã€‚ä½†æ˜¯ç°åœ¨ï¼Œæˆ‘å†…å¿ƒæ—©å·²æ˜¯æœŸå¾…å®ƒæ—©æ—¥äº¤æˆ¿ï¼Œæˆ‘å¯ä»¥ä½è¿›å»ã€‚</p><p>åœ¨ç°åœ¨å…¬å¸å‘†äº† 4 å¹´ï¼Œä½çš„åœ°æ–¹ä¹Ÿ 3 å¹´å¤šæ²¡æ¬è¿‡å®¶ï¼Œä¸€ç›´å°±æ˜¯è¿™æ ·ï¼Œä¸æ¸©ä¸ç«ã€‚æ˜å¹´åˆæ‰“ç®—è·³å‡ºè¿™ä¸ªå¹¶ä¸èˆ’é€‚çš„èˆ’é€‚åœˆï¼Œæ¢ä¸ªæ–°ç¯å¢ƒï¼Œæ‰€ä»¥æ‰“ç®—å¹´åè¾èŒã€‚æœ€è¿‘æƒ³åˆ°è¿™ä¸ªäº‹æƒ…å¿ƒé‡Œæ€»æ˜¯æ¿€åŠ¨ï¼Œä¸€ç‚¹ä¸åœ¨æ€•ï¼Œæˆ‘è§‰å¾—æ˜¯æ—¶å€™äº†ã€‚</p><p>æ˜å¹´æœ‰ç›®æ ‡å—ï¼Ÿæ²¡æœ‰ã€‚æœ€å¸Œæœ›çš„å¤§æ¦‚æ˜¯è„±å•ã€‚å¦å¤–å¸Œæœ›è‡ªå·±æ˜å¹´èƒ½æ‹æ›´å¤šç…§ç‰‡ï¼Œæ‘„å½±æŠ€æœ¯èƒ½æœ‰æ‰€æå‡ã€‚ä¸è¿‡æå‡æŠ€æœ¯è¿™ç§ç›®æ ‡è¿‡äºè™šæ— ï¼Œå› ä¸ºæˆ‘è§‰å¾—æˆ‘çš„å®¡ç¾ä¸è¶³ä»¥è®©æˆ‘åˆ¤æ–­å‡ºæˆ‘çš„æŠ€æœ¯æ˜¯å¦æœ‰æå‡ã€‚</p><p>ã€Šç”Ÿä¹‹å“å¾€ã€‹æ˜¯æˆ‘ä»Šå¹´å‘ç°çš„å®è—æ­Œæ›²ã€‚è¿™é¦–æ­Œç»æœ›ä¸­é€éœ²ç€å¸Œæœ›ã€‚æˆ‘å–œæ¬¢è®¸åµ©çš„åŸå› å°±æ˜¯ä»–ä¼ è¾¾ç»™æˆ‘çš„å°±æ˜¯è¿™ç§æ€æƒ³ã€‚è€Œè¿™é¦–æ­Œä¹Ÿæœ‰ç€åŒæ ·çš„è¡¨è¾¾ã€‚è¿™ä¸–ç•Œå¾ˆç³Ÿç³•ï¼Œä½†è¿™ä¸–ç•Œä¹Ÿå¾ˆç¾å¥½ï¼Œä½†è¦å¿ƒæ€€å¸Œæœ›ã€‚</p><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=554241255&auto=0&height=66"></iframe><blockquote><p><strong>å°å¿ƒå®‰å‘½ï¼ŒåŸ‹å¤´ä»»äº‹</strong> â€”â€”æ›¾å›½è—©</p><p>å°å¿ƒè°¨æ…å®‰äºå¤©å‘½ï¼ŒåŸ‹å¤´åšäº‹ä¸é—®å…¶ä»–ã€‚</p></blockquote><p>è¿™æ˜¯ä»Šå¹´è®¸åµ©åœ¨ä¸€æ¬¡ç›´æ’­ä¸­é€ç»™ä¸€ä½ç²‰ä¸çš„å»ºè®®ã€‚å®‰äºå¤©å‘½å¹¶ä¸æ˜¯è®¤å‘½ï¼Œè€Œæ˜¯æ‰¾åˆ°è‡ªå·±çš„å®šä½ï¼ŒçŸ¥é“è‡ªå·±èƒ½åšä»€ä¹ˆï¼Œé€‚åˆåšä»€ä¹ˆï¼Œç„¶ååŠªåŠ›å»åšã€‚æˆ‘è§‰å¾—è¿™æ˜¯ä¸€ä¸ªè´¯ç©¿äººä¸€ç”Ÿçš„è¯¾é¢˜ã€‚</p><p>å½“æˆ‘å¬åˆ°è¿™å¥è¯ä»¥åŠå®ƒæ‰€è¡¨è¾¾çš„æ„æ€åï¼Œæˆ‘è§‰å¾—æˆ‘ç»ˆäºæ‰¾åˆ°äº†å¯ä»¥æ¦‚æ‹¬æˆ‘å¤„ä¸–æ€åº¦çš„æ–‡å­—ã€‚</p><p>æœ€åæ˜¯å¯¹è‡ªå·±è¯´çš„è¯ï¼š<strong>å¸Œæœ›åœ¨æ¥ä¸‹å»çš„äººç”Ÿä¸­æ°¸è¿œå¿ƒæ€€å¸Œæœ›ï¼Œå®‰å‘½ï¼Œä»»äº‹</strong>ã€‚</p><p><strong>æ»šè›‹å§ï¼Œ2020ï¼</strong></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;è™½ç„¶æ ‡é¢˜å†™çš„æ˜¯ 2021ï¼Œä½†å®é™…ä¸Šè¿™ç¯‡æ˜¯ 2020 å¹´çš„å›é¡¾ã€‚&lt;/p&gt;
&lt;p&gt;å›é¡¾ 2020ï¼Œæ‰å‘ç°ç–«æƒ…å·²ç»ä¼´éšäº†æˆ‘ä¸€æ•´å¹´ï¼Œå¹´åˆé­é‡ç–«æƒ…æ—¶çš„ææ…Œæ˜æ˜è¿˜å†å†åœ¨ç›®ã€‚&lt;/p&gt;
&lt;p&gt;å› ä¸ºç–«æƒ…ï¼Œç¬¬ä¸€æ¬¡ä½“éªŒäº†åœ¨å®¶åŠå…¬ã€‚è¿™å¯æ˜¯æ­£å„¿å…«ç»çš„åœ¨å®¶åŠå…¬ï¼Œä¸æ˜¯æˆ‘å¹³æ—¶è¯·äº†å‡ï¼Œç»“æœè¿˜æ˜¯è¢«åŒäº‹æ‰¾ä¸Šé—¨ç„¶
      
    
    </summary>
    
    
      <category term="éšç¬”" scheme="https://github.com/Tit1e/tags/%E9%9A%8F%E7%AC%94/"/>
    
      <category term="å¹´ç»ˆæ€»ç»“" scheme="https://github.com/Tit1e/tags/%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>nginx http é‡å®šå‘è‡³ https</title>
    <link href="https://github.com/Tit1e/2020/12/30/144-http-to-https/"/>
    <id>https://github.com/Tit1e/2020/12/30/144-http-to-https/</id>
    <published>2020-12-30T13:21:12.000Z</published>
    <updated>2020-12-30T13:57:20.456Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>è¶…æ–‡æœ¬ä¼ è¾“å®‰å…¨åè®®</strong>ï¼ˆè‹±è¯­ï¼š<strong>H</strong>yper<strong>T</strong>ext <strong>T</strong>ransfer <strong>P</strong>rotocol <strong>S</strong>ecureï¼Œç¼©å†™ï¼š<strong>HTTPS</strong>ï¼›å¸¸ç§°ä¸ºHTTP over TLSã€HTTP over SSLæˆ–HTTP Secureï¼‰æ˜¯ä¸€ç§é€šè¿‡<a href="https://zh.wikipedia.org/wiki/è¨ˆç®—æ©Ÿç¶²çµ¡" target="_blank" rel="noopener">è®¡ç®—æœºç½‘ç»œ</a>è¿›è¡Œå®‰å…¨é€šä¿¡çš„<a href="https://zh.wikipedia.org/wiki/ç¶²è·¯å‚³è¼¸å”å®š" target="_blank" rel="noopener">ä¼ è¾“åè®®</a>ã€‚HTTPSç»ç”±<a href="https://zh.wikipedia.org/wiki/HTTP" target="_blank" rel="noopener">HTTP</a>è¿›è¡Œé€šä¿¡ï¼Œä½†åˆ©ç”¨<a href="https://zh.wikipedia.org/wiki/ä¼ è¾“å±‚å®‰å…¨" target="_blank" rel="noopener">SSL/TLS</a>æ¥<a href="https://zh.wikipedia.org/wiki/åŠ å¯†" target="_blank" rel="noopener">åŠ å¯†</a>æ•°æ®åŒ…ã€‚HTTPSå¼€å‘çš„ä¸»è¦ç›®çš„ï¼Œæ˜¯æä¾›å¯¹<a href="https://zh.wikipedia.org/wiki/ç¶²ç«™" target="_blank" rel="noopener">ç½‘ç«™</a>æœåŠ¡å™¨çš„<a href="https://zh.wikipedia.org/wiki/èº«ä»½éªŒè¯" target="_blank" rel="noopener">èº«ä»½è®¤è¯</a>ï¼Œä¿æŠ¤äº¤æ¢èµ„æ–™çš„éšç§ä¸<a href="https://zh.wikipedia.org/wiki/å®Œæ•´æ€§" target="_blank" rel="noopener">å®Œæ•´æ€§</a>ã€‚â€”â€”æ‘˜è‡ªç»´åŸºç™¾ç§‘</p></blockquote><p>https ç›®å‰å·²ç»æ„ˆå‘æ™®åŠï¼Œæ‰€ä»¥æˆ‘ä¹Ÿä¸ºè‡ªå·±çš„<a href="https://album.animalcrossing.life/" target="_blank" rel="noopener">æ‘„å½±ç½‘ç«™</a>ç”³è¯·äº† https è¯ä¹¦ã€‚å¦‚ä½•ç”³è¯·è¯ä¹¦å¯ä»¥å‚è€ƒæˆ‘çš„è¿™ç¯‡åšå®¢ï¼š<a href="https://evolly.one/2020/12/15/137-freessl/" target="_blank" rel="noopener">ä¸ºåŸŸåç”³è¯·å…è´¹ https è¯ä¹¦</a>ã€‚</p><p>è¯ä¹¦ç”³è¯·å®Œäº†ï¼Œhttps çš„ Nginx é…ç½®ä¹Ÿé…ç½®å®Œäº†ï¼Œç”¨ https å¼€å¤´çš„ URL ä¹Ÿå¯ä»¥è®¿é—®åˆ°ç½‘ç«™äº†ï¼Œä½†æ˜¯å‘ç°åªæœ‰å®Œæ•´æ‰“ä¸Šå¸¦ https çš„åœ°å€æ‰èƒ½æ­£ç¡®è®¿é—®åˆ°ç½‘ç«™ï¼Œå¦‚æœç”¨ http è®¿é—®ï¼Œä¼šå‘ç°è®¿é—®çš„æ˜¯å¦ä¸€ä¸ªç½‘ç«™ã€‚ä½†å¹³æ—¶æµè§ˆæ¯”å¦‚ç™¾åº¦è°·æ­Œç­‰ä¸€äº›åœ°å€æ—¶ï¼Œæˆ‘ä»¬åªè¦è¾“å…¥åŸŸåï¼Œè®¿é—®çš„æ—¶å€™é»˜è®¤è®¿é—®çš„å°±æ˜¯ https çš„ç½‘ç«™ï¼Œå“ªæ€•ä½ è®¿é—®çš„æ˜¯ http çš„åœ°å€ï¼Œæœ€åä¹Ÿä¼šè‡ªåŠ¨è·³è½¬è‡³ httpsã€‚è·¯ç”±çš„é‡å®šå‘å…¶å® Nginx å¾ˆå®¹æ˜“å°±å¯ä»¥åšåˆ°ï¼Œåªè¦åŠ å‡ è¡Œé…ç½®å°±å¯ä»¥äº†ã€‚</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åŠ ä¸Šè¿™æ®µé…ç½®</span></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> xxx.xxxxxxx.xxx;</span><br><span class="line">    <span class="attribute">return</span> <span class="number">301</span> https://<span class="variable">$server_name</span><span class="variable">$request_uri</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#æ­£å¸¸çš„httpsé…ç½®</span></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">443</span> ssl;</span><br><span class="line">    <span class="attribute">server_name</span> xxx.xxxxxxx.xxx;</span><br><span class="line">    <span class="attribute">ssl_certificate</span> /xxx/xx.crt;</span><br><span class="line">    <span class="attribute">ssl_certificate_key</span> /xxx/xx.key;</span><br><span class="line">    <span class="attribute">root</span> /xxx/web;</span><br><span class="line">    <span class="attribute">index</span> index.html;</span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">      <span class="attribute">proxy_pass</span> http://127.0.0.1:8888;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ®µé…ç½®æˆ‘ä¹ŸåŒæ­¥åˆ°äº†<a href="https://evolly.one/2020/12/15/137-freessl/" target="_blank" rel="noopener">ä¸ºåŸŸåç”³è¯·å…è´¹ https è¯ä¹¦</a>ã€‚</p><p>ç„¶åé‡å¯ Nginxï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nginx -s reload</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;è¶…æ–‡æœ¬ä¼ è¾“å®‰å…¨åè®®&lt;/strong&gt;ï¼ˆè‹±è¯­ï¼š&lt;strong&gt;H&lt;/strong&gt;yper&lt;strong&gt;T&lt;/strong&gt;ext &lt;strong&gt;T&lt;/strong&gt;ransfer &lt;strong&gt;P&lt;/strong&gt;rotoco
      
    
    </summary>
    
    
      <category term="æŠ˜è…¾" scheme="https://github.com/Tit1e/tags/%E6%8A%98%E8%85%BE/"/>
    
      <category term="å­¦ä¹ " scheme="https://github.com/Tit1e/tags/%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="Nginx" scheme="https://github.com/Tit1e/tags/Nginx/"/>
    
  </entry>
  
  <entry>
    <title>express é™æ€èµ„æºä»£ç†</title>
    <link href="https://github.com/Tit1e/2020/12/29/143-express-static/"/>
    <id>https://github.com/Tit1e/2020/12/29/143-express-static/</id>
    <published>2020-12-29T12:35:23.000Z</published>
    <updated>2020-12-29T13:08:31.310Z</updated>
    
    <content type="html"><![CDATA[<p>å‰é˜µå­åœ¨æ­å»ºæˆ‘çš„<a href="https://album.animalcrossing.life/" target="_blank" rel="noopener">æ‘„å½±ç½‘ç«™</a>ï¼Œç­‰æˆ‘è·‘èµ·äº†åç«¯æœåŠ¡ï¼Œè¦å¸ƒå‰ç«¯é¡µé¢çš„æ—¶å€™ï¼Œçªç„¶æƒ³åˆ°æˆ‘è¿˜éœ€è¦å¸ƒä¸ªå‰ç«¯çš„æœåŠ¡ï¼Œä½†å®é™…å‰ç«¯åªæ˜¯éœ€è¦è®¿é—®ä¸€ä¸ª index.html æ–‡ä»¶ï¼Œå•ç‹¬è·‘é¡¹ç›®åˆæ²¡æœ‰å¿…è¦ï¼Œäºæ˜¯æˆ‘ç½‘ä¸ŠæŸ¥äº†ï¼Œå› ä¸ºæˆ‘è§‰å¾—è¿™ç§æƒ…å†µä¸€å®šæœ‰äººé‡åˆ°è¿‡ï¼Œå¹¶ä¸”è‚¯å®šä¼šæœ‰æˆç†Ÿçš„è§£å†³æ–¹æ¡ˆã€‚å› ä¸ºæˆ‘ç”¨çš„æ˜¯ expressï¼Œäºæ˜¯æˆ‘å¸¦ç€ express çš„å…³é”®å­—æœç´¢äº†ä¸€ä¸‹ï¼Œæœç„¶ï¼Œexpress å°±æä¾›è¿™ç§æœåŠ¡ï¼Œç§°ä¸º express é™æ€èµ„æºä»£ç†ã€‚</p><p>ä½¿ç”¨ä¹Ÿå¾ˆç®€å•ï¼Œæ— éå°±æ˜¯åœ¨åŸæœ‰çš„ä»£ç ä¸Šå¢åŠ ä¸€è¡Œï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line">app.use(express.static(path.join(__dirname, <span class="string">'web'</span>)));</span><br></pre></td></tr></table></figure><p>web æ˜¯æˆ‘æ”¾å‰ç«¯æ–‡ä»¶çš„ç›®å½•ï¼Œå¹¶ä¸”æˆ‘å†™è¿™è¡Œä»£ç çš„æ‰€åœ¨æ–‡ä»¶ä¸ web ç›®å½•éƒ½åœ¨ç»Ÿä¸€å±‚çº§ï¼Œå¹¶ä¸”éƒ½æ˜¯æ ¹ç›®å½•ï¼Œæ‰€ä»¥æˆ‘è·¯å¾„å°±ä½¿ç”¨äº†__dirnameã€‚ç„¶åé‡å¯ä¸€ä¸‹æœåŠ¡ï¼Œä»£ç†å°±ç”Ÿæ•ˆäº†ï¼Œç›´æ¥è®¿é—®<a href="https://album.animalcrossing.life" target="_blank" rel="noopener">https://album.animalcrossing.life</a>è®¿é—®åˆ°çš„å°±æ˜¯æˆ‘éƒ¨ç½²çš„å‰ç«¯ index.html æ–‡ä»¶äº†ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;å‰é˜µå­åœ¨æ­å»ºæˆ‘çš„&lt;a href=&quot;https://album.animalcrossing.life/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;æ‘„å½±ç½‘ç«™&lt;/a&gt;ï¼Œç­‰æˆ‘è·‘èµ·äº†åç«¯æœåŠ¡ï¼Œè¦å¸ƒå‰ç«¯é¡µé¢çš„æ—¶å€™ï¼Œçªç„¶æƒ³åˆ°æˆ‘è¿˜éœ€è¦å¸ƒä¸ªå‰ç«¯çš„æœåŠ¡ï¼Œä½†å®é™…å‰ç«¯åªæ˜¯éœ€
      
    
    </summary>
    
    
      <category term="å­¦ä¹ " scheme="https://github.com/Tit1e/tags/%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>Node.js çˆ¬è™«åˆæ­¥å®è·µ</title>
    <link href="https://github.com/Tit1e/2020/12/28/142-node-spider/"/>
    <id>https://github.com/Tit1e/2020/12/28/142-node-spider/</id>
    <published>2020-12-28T13:15:19.000Z</published>
    <updated>2020-12-29T01:20:22.423Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¹´å¹´åˆçš„æ—¶å€™åŠ¨æ£®å› ä¸ºæœ¬èº«çš„å½±å“åŠ›åŠ ä¸Šç–«æƒ…çš„åŸå› ï¼Œåœ¨å…¨çƒå¤§ç«ï¼Œå¾ˆå¤šåŸæœ¬éƒ½ä¸çŸ¥é“ Switch æ˜¯ä»€ä¹ˆçš„äººï¼Œéƒ½å› ä¸ºåŠ¨æ£®å…¥äº†Switchï¼Œå½“æ—¶ Switch ä»·æ ¼ä¸€åº¦è¢«ç‚’äº†ä¸Šå»ï¼ŒåŠ¨æ£®é™å®šç‰ˆæ›´æ˜¯ç¿»äº†å€ã€‚å¯è§å…¶ç«çƒ­ç¨‹åº¦ã€‚</p><p>è€Œæˆ‘é‚£æ—¶å€™ä¹ŸåŠ å…¥çš„åŠ¨æ£®å¤§éƒ¨é˜Ÿï¼Œå¹¶ä¸”åŠ äº†ç¾¤ï¼Œå¤§å®¶åœ¨ç¾¤é‡ŒèŠå¾—çƒ­ç«æœå¤©ï¼Œå„ç§æ‘¸ï¼Œå„ç§æŠ¥ä»·æ ¼ï¼Œå–å¤§å¤´èœã€‚é‚£æ—¶å€™æˆ‘å°±æƒ³ç€åšä¸€ä¸ªâ€œèœå¸‚åœºâ€å°ç¨‹åºï¼Œæ–¹ä¾¿å¤§å®¶å–å¤§å¤´èœã€‚ä½†ç­‰æˆ‘å¼€å‘å‡ºç¬¬ä¸€ç‰ˆçš„æ—¶å€™ï¼Œå–å¤§å¤´èœçš„çƒ­åº¦å·²ç»ä¸‹å»äº†ï¼Œæˆ‘å°±å¤±å»äº†å¼€å‘çš„åŠ¨åŠ›ã€‚åæ¥åœ¨æŸ¥åŠ¨æ£®ä¿¡æ¯çš„æ—¶å€™ï¼Œæ— æ„é—´å‘ç°äº† B ç«™çš„<a href="https://wiki.biligame.com/dongsen/%E9%A6%96%E9%A1%B5" target="_blank" rel="noopener">åŠ¨æ£® WIKI é¡µ</a>ã€‚äºæ˜¯æˆ‘åˆè½¬å¿µä¸€æƒ³ï¼Œä¸å¦‚çˆ¬å®ƒæ•°æ®åšä¸ªå›¾é‰´å§ï¼ä¸è¿‡æ­¤æ—¶çš„å¿ƒæ€å®Œå…¨æ˜¯ä¸ºäº†å†™çˆ¬è™«ç»ƒæ‰‹ï¼Œå› ä¸ºå½“æ—¶å·²ç»æœ‰å¾ˆå¤šæˆç†Ÿçš„å›¾é‰´appã€å°ç¨‹åºå‡ºç°ï¼Œæˆ‘å°±ä¸å‡‘è¿™ä¸ªçƒ­é—¹äº†ã€‚</p><p>ä¸‹é¢æ˜¯å°ç¨‹åºç ï¼Œæ¬¢è¿å¯ä»¥æ‰«ç ä½“éªŒã€‚</p><p><img src="https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-12-28-animalCrossingCode.jpg" alt></p><p>è¨€å½’æ­£ä¼ ï¼Œä¸‹é¢æ˜¯ä»¥<a href="https://wiki.biligame.com/dongsen/%E5%B0%8F%E5%8A%A8%E7%89%A9%E5%9B%BE%E9%89%B4" target="_blank" rel="noopener">åŠ¨æ£®å°åŠ¨ç‰©å›¾é‰´</a>é¡µé¢ä¸ºç›®æ ‡ï¼Œå†™ä¸€ä¸ªç®€æ˜“çˆ¬è™«ã€‚</p><p>å®‰è£…ä¸€äº›æ’ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># npm åˆå§‹åŒ–</span></span><br><span class="line">npm init -y</span><br><span class="line"><span class="comment"># å®‰è£…æ’ä»¶</span></span><br><span class="line">npm i superagent cheerio</span><br></pre></td></tr></table></figure><ul><li>superagent æ˜¯ node ç¯å¢ƒä¸‹çš„ http æ¨¡å—ï¼Œå¯ç”¨æ¥å‘å™¨è¯·æ±‚ï¼Œç¨åç”¨æ¥è¯·æ±‚é¡µé¢</li><li>cheerio æ¨¡å—å¯ä»¥è§£æé¡µé¢ï¼Œç„¶åå¯ä»¥ä½¿ç”¨ä¸ jQuery ç›¸åŒçš„è¯­æ³•æ¥æ“ä½œ DOM</li></ul><p>æ–°å»ºå…¥å£æ–‡ä»¶ <code>index.js</code></p><p>å°è£…è¯·æ±‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// getContent.js</span></span><br><span class="line"><span class="keyword">const</span> BASE_URL = <span class="string">'https://wiki.biligame.com'</span>;</span><br><span class="line"><span class="keyword">const</span> superagent = <span class="built_in">require</span>(<span class="string">"superagent"</span>);</span><br><span class="line"><span class="keyword">const</span> cheerio = <span class="built_in">require</span>(<span class="string">"cheerio"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–é¡µé¢å†…å®¹æ–¹æ³•</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125; query çˆ¬å–çš„é¡µé¢åç¼€</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getContent</span>(<span class="params">query</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    superagent.get(<span class="string">`<span class="subst">$&#123;BASE_URL&#125;</span>/dongsen/<span class="subst">$&#123;query&#125;</span>`</span>).end(<span class="function">(<span class="params">err, sres</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="keyword">return</span> reject(err)</span><br><span class="line">      &#125;</span><br><span class="line">      resolve(cheerio.load(sres.text));</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  getContent</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ç¼–å†™çˆ¬å–ä»£ç å‰æˆ‘ä»¬è¦å¯¹é¡µé¢åšä¸€ä¸ªåˆ†æï¼š</p><p>è¿™æ˜¯æˆ‘ä»¬è¦çˆ¬å–çš„ç›®æ ‡é¡µé¢</p><p><a href="https://wiki.biligame.com/dongsen/å°åŠ¨ç‰©å›¾é‰´" target="_blank" rel="noopener">https://wiki.biligame.com/dongsen/å°åŠ¨ç‰©å›¾é‰´</a></p><p>è¿™æ˜¯æˆ‘ä»¬è¦çˆ¬å–çš„ç›®æ ‡</p><p><img src="https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-12-28-141903.png" alt></p><p>æ¯ä¸ªå°åŠ¨ç‰©ç‚¹å‡»åå­—å¯è¿›å…¥è¯¦æƒ…é¡µï¼š</p><p><img src="https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-12-28-142155.png" alt></p><p>å¯ä»¥çœ‹åˆ°è¯¦æƒ…é¡µä¸­ä¿¡æ¯æ¯”åˆ—è¡¨ä¸Šçš„æ›´ä¸ºä¸°å¯Œï¼Œæˆ‘ä»¬è¦æƒ³åŠæ³•çˆ¬å–è¯¦æƒ…é¡µä¸­çš„ä¿¡æ¯ã€‚æ‰€ä»¥éœ€è¦å»è·å–åˆ—è¡¨ä¸Š a æ ‡ç­¾çš„åœ°å€ï¼Œç„¶åå†å»è·å–è¯¦æƒ…ä¸­çš„åŠ¨ç‰©ä¿¡æ¯ã€‚</p><p>æ‰€ä»¥æ€è·¯å¦‚ä¸‹ï¼š</p><ol><li>é¦–å…ˆè¯·æ±‚åˆ—è¡¨é¡µ</li><li>è·å–åˆ—è¡¨ä¸­çš„æ‰€æœ‰å°åŠ¨ç‰©çš„é¡¹</li><li>å¾ªç¯é¡¹å–å‡ºæ¯é¡¹åå­—ï¼Œè·å–åå­—ä¸Šçš„aé“¾æ¥åœ°å€ï¼Œæ‹¼æ¥å‡ºå®Œæ•´è·¯å¾„</li><li>é€šè¿‡å®Œæ•´è·¯å¾„è·å–å°åŠ¨ç‰©çš„è¯¦ç»†ä¿¡æ¯</li><li>å†™å…¥æ•°æ®</li></ol><p>æ€è·¯æ¸…æ™°åé‚£ä¹ˆå¼€å§‹ç¼–å†™ä»£ç ï¼Œç¼–è¾‘ <code>index.js</code>ï¼š</p><p>é¦–å…ˆæˆ‘ä»¬è¦çˆ¬å–æ‰€æœ‰å°åŠ¨ç‰©çš„æ•°æ®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * çˆ¬å–å°åŠ¨ç‰©é¡µé¢</span></span><br><span class="line"><span class="comment"> * @param &#123;Date&#125; update_time çˆ¬è™«æ‰§è¡Œæ—¶é—´ï¼Œéå¿…é¡»</span></span><br><span class="line"><span class="comment"> * @param &#123;*&#125; url å°åŠ¨ç‰©é¡µé¢çš„åç¼€</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getAnimals</span>(<span class="params">update_time, url</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> $ = <span class="keyword">await</span> getContent(url)</span><br><span class="line">  <span class="comment">// è·å–åˆ—è¡¨ä¸­çš„æ‰€æœ‰é¡¹</span></span><br><span class="line">  <span class="keyword">const</span> nodes = $(<span class="string">"#CardSelectTr tbody tr"</span>)</span><br><span class="line">  <span class="comment">// å°åŠ¨ç‰©è¯¦æƒ…é¡µåç¼€ï¼Œå…¶å®å°±æ˜¯åå­—</span></span><br><span class="line">  <span class="keyword">const</span> animals = []</span><br><span class="line">  <span class="keyword">const</span> LENGTH = nodes.length</span><br><span class="line"> <span class="comment">// ç¬¬ 0 é¡¹æ˜¯è¡¨å¤´ï¼Œæ‰€ä»¥ç´¢å¼•ä» 1 å¼€å§‹</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; LENGTH; i++)&#123;</span><br><span class="line">    <span class="keyword">let</span> $element = $(nodes[i]);</span><br><span class="line">    <span class="comment">// åˆ—è¡¨ä¸­æœ‰ä¸€é¡¹é”™è¯¯é¡¹ï¼Œéœ€è¦æ’é™¤</span></span><br><span class="line">    <span class="keyword">if</span> ($element.find(<span class="string">'td'</span>).eq(<span class="number">0</span>).find(<span class="string">'a'</span>).text() !== <span class="string">'40pxString'</span>) &#123;</span><br><span class="line">      <span class="comment">// è·å–å°åŠ¨ç‰©é“¾æ¥åç¼€</span></span><br><span class="line">      <span class="keyword">const</span> url = $element.find(<span class="string">'td'</span>).eq(<span class="number">0</span>).find(<span class="string">'a'</span>).attr(<span class="string">'href'</span>).substr(<span class="number">9</span>)</span><br><span class="line">      animals.push(url)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// åˆ é™¤ animals.txtï¼Œå¼€å§‹è·å–æ•°æ®å‰ï¼Œæ¸…é™¤æ—§æ•°æ®</span></span><br><span class="line">  fs.unlink(<span class="string">'animals.txt'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (error) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(error);</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ä¸ºäº†æŒ‰åˆ—è¡¨é¡ºåºè·å–å°åŠ¨ç‰©ä¿¡æ¯ï¼Œæˆ‘ä½¿ç”¨äº†é€’å½’</span></span><br><span class="line">  <span class="keyword">let</span> index = <span class="number">0</span></span><br><span class="line">  getInfo(animals, index, animalInfo, update_time)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ <code>getAnimals</code> æ–¹æ³•æœ€åä½¿ç”¨äº† <code>getInfo</code> é€’å½’å‡½æ•°ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥ç¼–å†™ <code>getInfo</code>ï¼Œä¾æ—§æ˜¯åœ¨ <code>index.js</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"><span class="keyword">const</span> os = <span class="built_in">require</span>(<span class="string">"os"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getInfo</span>(<span class="params">list, index, func, update_time</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> name = list[index];</span><br><span class="line">  <span class="keyword">let</span> otherInfo = &#123;&#125;;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    otherInfo = <span class="keyword">await</span> func(name).catch(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (index &lt; list.length - <span class="number">1</span>) &#123;</span><br><span class="line">        index += <span class="number">1</span>;</span><br><span class="line">        getInfo(list, index, func, update_time);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="comment">// å‡ºé”™è·³è¿‡è¿›å…¥ä¸‹ä¸€ä¸ªå°åŠ¨ç‰©</span></span><br><span class="line">    <span class="keyword">if</span> (index &lt; list.length - <span class="number">1</span>) &#123;</span><br><span class="line">      index += <span class="number">1</span>;</span><br><span class="line">      getInfo(list, index, func, update_time);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// os.EOL ç”¨äºæ¢è¡Œ http://nodejs.cn/api/os/os_eol.html</span></span><br><span class="line">  <span class="comment">// è·å–åˆ°æ•°æ®åå†™å…¥ animals.txt</span></span><br><span class="line">  fs.appendFile(<span class="string">"animals.txt"</span>, <span class="built_in">JSON</span>.stringify(otherInfo) + os.EOL, (err) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">throw</span> err;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (index &lt; list.length - <span class="number">1</span>) &#123;</span><br><span class="line">        index += <span class="number">1</span>;</span><br><span class="line">        getInfo(list, index, func, update_time);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€’å½’æ–¹æ³•ä¹Ÿå†™å¥½äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯çœŸæ­£è·å–å°åŠ¨ç‰©æ•°æ®çš„æ–¹æ³•ï¼Œè¿˜æ˜¯åœ¨ <code>index.js</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; getContent &#125; = <span class="built_in">require</span>(<span class="string">'./getContent.js'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–å°åŠ¨ç‰©ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125; url å°åŠ¨ç‰©é¡µé¢åç¼€</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">animalInfo</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="keyword">async</span> (resolve, reject) =&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> $ = <span class="keyword">await</span> getContent(url).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">        reject()</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="comment">// å®šä¹‰å°åŠ¨ç‰©å„é¡¹ä¿¡æ¯çš„å­—æ®µ</span></span><br><span class="line">      <span class="keyword">const</span> list = [<span class="string">'birthday'</span>, <span class="string">'character'</span>, <span class="string">'mantra'</span>, <span class="string">'hobby'</span>, <span class="string">'style'</span>, <span class="string">'color'</span>, <span class="string">'vioce'</span>, <span class="string">'ethnicity'</span>, <span class="string">'motto'</span>, <span class="string">'foreign_name'</span>]</span><br><span class="line">      <span class="keyword">const</span> nodes = $(<span class="string">".box-poke-left .box-poke"</span>)</span><br><span class="line">      <span class="keyword">const</span> str = $(<span class="string">".box-poke-left .box-title-1"</span>).text()</span><br><span class="line">      <span class="keyword">const</span> name = str.substr(<span class="number">0</span>, str.length <span class="number">-1</span>)</span><br><span class="line">      <span class="keyword">const</span> sex = str.substr(<span class="number">-1</span>) === <span class="string">'â™‚'</span> ? <span class="string">'ç”·'</span> : <span class="string">'å¥³'</span></span><br><span class="line">      <span class="keyword">const</span> image = $(<span class="string">".box-poke-right"</span>).find(<span class="string">'img'</span>).attr(<span class="string">'src'</span>)</span><br><span class="line">      <span class="keyword">const</span> info = &#123;</span><br><span class="line">        name,</span><br><span class="line">        sex,</span><br><span class="line">        image,</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; list.length; i++)&#123;</span><br><span class="line">        <span class="keyword">const</span> attr = list[i]</span><br><span class="line">        <span class="keyword">const</span> text = nodes.eq(i).find(<span class="string">'.box-font'</span>).text()</span><br><span class="line">        <span class="keyword">if</span> (attr === <span class="string">'birthday'</span>) &#123;</span><br><span class="line">          <span class="comment">// å¤„ç†å°åŠ¨ç‰©çš„ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥ä¸å¤„ç†</span></span><br><span class="line">          info[attr] = text.replace(<span class="string">'æœˆ'</span>, <span class="string">'-'</span>).replace(<span class="string">'æ—¥'</span>, <span class="string">''</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          info[attr] = text</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      info.birth_month = info.birthday.split(<span class="string">'-'</span>).shift()</span><br><span class="line">      resolve(info)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      reject(url + <span class="string">'å‡ºé”™å•¦'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œåœ¨ <code>index.js</code> æœ€åæ‰§è¡Œæ–¹æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line"><span class="keyword">const</span> query = <span class="built_in">encodeURIComponent</span>(<span class="string">'å°åŠ¨ç‰©å›¾é‰´'</span>)</span><br><span class="line">getAnimals(now, query)</span><br></pre></td></tr></table></figure><p>å®Œæ•´çš„ <code>index.js</code> ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"><span class="keyword">const</span> os = <span class="built_in">require</span>(<span class="string">"os"</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; getContent &#125; = <span class="built_in">require</span>(<span class="string">'./getContent.js'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getInfo</span>(<span class="params">list, index, func, update_time</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> name = list[index];</span><br><span class="line">  <span class="keyword">let</span> otherInfo = &#123;&#125;;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    otherInfo = <span class="keyword">await</span> func(name).catch(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (index &lt; list.length - <span class="number">1</span>) &#123;</span><br><span class="line">        index += <span class="number">1</span>;</span><br><span class="line">        getInfo(list, index, func, update_time);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="comment">// å‡ºé”™è·³è¿‡è¿›å…¥ä¸‹ä¸€ä¸ªå°åŠ¨ç‰©</span></span><br><span class="line">    <span class="keyword">if</span> (index &lt; list.length - <span class="number">1</span>) &#123;</span><br><span class="line">      index += <span class="number">1</span>;</span><br><span class="line">      getInfo(list, index, func, update_time);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// os.EOL ç”¨äºæ¢è¡Œ http://nodejs.cn/api/os/os_eol.html</span></span><br><span class="line">  fs.appendFile(<span class="string">"animals.txt"</span>, <span class="built_in">JSON</span>.stringify(otherInfo) + os.EOL, (err) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">throw</span> err;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (index &lt; list.length - <span class="number">1</span>) &#123;</span><br><span class="line">        index += <span class="number">1</span>;</span><br><span class="line">        getInfo(list, index, func, update_time);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–å°åŠ¨ç‰©ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125; url å°åŠ¨ç‰©é¡µé¢åç¼€</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">animalInfo</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="keyword">async</span> (resolve, reject) =&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> $ = <span class="keyword">await</span> getContent(url).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">        reject()</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">const</span> list = [<span class="string">'birthday'</span>, <span class="string">'character'</span>, <span class="string">'mantra'</span>, <span class="string">'hobby'</span>, <span class="string">'style'</span>, <span class="string">'color'</span>, <span class="string">'vioce'</span>, <span class="string">'ethnicity'</span>, <span class="string">'motto'</span>, <span class="string">'foreign_name'</span>]</span><br><span class="line">      <span class="keyword">const</span> nodes = $(<span class="string">".box-poke-left .box-poke"</span>)</span><br><span class="line">      <span class="keyword">const</span> str = $(<span class="string">".box-poke-left .box-title-1"</span>).text()</span><br><span class="line">      <span class="keyword">const</span> name = str.substr(<span class="number">0</span>, str.length <span class="number">-1</span>)</span><br><span class="line">      <span class="keyword">const</span> sex = str.substr(<span class="number">-1</span>) === <span class="string">'â™‚'</span> ? <span class="string">'ç”·'</span> : <span class="string">'å¥³'</span></span><br><span class="line">      <span class="keyword">const</span> image = $(<span class="string">".box-poke-right"</span>).find(<span class="string">'img'</span>).attr(<span class="string">'src'</span>)</span><br><span class="line">      <span class="keyword">const</span> info = &#123;</span><br><span class="line">        name,</span><br><span class="line">        sex,</span><br><span class="line">        image,</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; list.length; i++)&#123;</span><br><span class="line">        <span class="keyword">const</span> attr = list[i]</span><br><span class="line">        <span class="keyword">const</span> text = nodes.eq(i).find(<span class="string">'.box-font'</span>).text()</span><br><span class="line">        <span class="keyword">if</span> (attr === <span class="string">'birthday'</span>) &#123;</span><br><span class="line">          info[attr] = text.replace(<span class="string">'æœˆ'</span>, <span class="string">'-'</span>).replace(<span class="string">'æ—¥'</span>, <span class="string">''</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          info[attr] = text</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      info.birth_month = info.birthday.split(<span class="string">'-'</span>).shift()</span><br><span class="line">      resolve(info)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      reject(url + <span class="string">'å‡ºé”™å•¦'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * çˆ¬å–å°åŠ¨ç‰©é¡µé¢</span></span><br><span class="line"><span class="comment"> * @param &#123;Date&#125; update_time çˆ¬è™«æ‰§è¡Œæ—¶é—´ï¼Œéå¿…é¡»</span></span><br><span class="line"><span class="comment"> * @param &#123;*&#125; url å°åŠ¨ç‰©é¡µé¢çš„åç¼€</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getAnimals</span>(<span class="params">update_time, url</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> $ = <span class="keyword">await</span> getContent(url)</span><br><span class="line">  <span class="keyword">const</span> nodes = $(<span class="string">"#CardSelectTr tbody tr"</span>)</span><br><span class="line">  <span class="keyword">const</span> animals = []</span><br><span class="line">  <span class="keyword">const</span> LENGTH = nodes.length</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; LENGTH; i++)&#123;</span><br><span class="line">    <span class="keyword">let</span> $element = $(nodes[i]);</span><br><span class="line">    <span class="keyword">if</span> ($element.find(<span class="string">'td'</span>).eq(<span class="number">0</span>).find(<span class="string">'a'</span>).text() !== <span class="string">'40pxString'</span>) &#123;</span><br><span class="line">      <span class="comment">// è·å–å°åŠ¨ç‰©é“¾æ¥åç¼€</span></span><br><span class="line">      <span class="keyword">const</span> url = $element.find(<span class="string">'td'</span>).eq(<span class="number">0</span>).find(<span class="string">'a'</span>).attr(<span class="string">'href'</span>).substr(<span class="number">9</span>)</span><br><span class="line">      animals.push(url)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ é™¤ animals.txtï¼Œå¼€å§‹è·å–æ•°æ®å‰ï¼Œæ¸…é™¤æ—§æ•°æ®</span></span><br><span class="line">  fs.unlink(<span class="string">'animals.txt'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (error) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(error);</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// é€’å½’è·å–ä¿¡æ¯</span></span><br><span class="line">  <span class="keyword">let</span> index = <span class="number">0</span></span><br><span class="line">  getInfo(animals, index, animalInfo, update_time)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ‘ä»¬çˆ¬å–çš„é¡µé¢æ˜¯ https://wiki.biligame.com/dongsen/%E5%B0%8F%E5%8A%A8%E7%89%A9%E5%9B%BE%E9%89%B4</span></span><br><span class="line"><span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line"><span class="keyword">const</span> query = <span class="built_in">encodeURIComponent</span>(<span class="string">'å°åŠ¨ç‰©å›¾é‰´'</span>)</span><br><span class="line">getAnimals(now, query)</span><br></pre></td></tr></table></figure><p>è¿è¡Œçˆ¬è™«ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node index.js</span><br></pre></td></tr></table></figure><p>ä¸å‡ºæ„å¤–ä¼šåœ¨æ ¹ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª animals.txt æ–‡ä»¶ã€‚</p><p><img src="https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-12-28-145321.png" alt></p><p><a href="https://github.com/Tit1e/Demos/tree/master/142.node-spider">æºç æŸ¥çœ‹</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ä»Šå¹´å¹´åˆçš„æ—¶å€™åŠ¨æ£®å› ä¸ºæœ¬èº«çš„å½±å“åŠ›åŠ ä¸Šç–«æƒ…çš„åŸå› ï¼Œåœ¨å…¨çƒå¤§ç«ï¼Œå¾ˆå¤šåŸæœ¬éƒ½ä¸çŸ¥é“ Switch æ˜¯ä»€ä¹ˆçš„äººï¼Œéƒ½å› ä¸ºåŠ¨æ£®å…¥äº†Switchï¼Œå½“æ—¶ Switch ä»·æ ¼ä¸€åº¦è¢«ç‚’äº†ä¸Šå»ï¼ŒåŠ¨æ£®é™å®šç‰ˆæ›´æ˜¯ç¿»äº†å€ã€‚å¯è§å…¶ç«çƒ­ç¨‹åº¦ã€‚&lt;/p&gt;
&lt;p&gt;è€Œæˆ‘é‚£æ—¶å€™ä¹ŸåŠ å…¥çš„åŠ¨æ£®å¤§éƒ¨é˜Ÿï¼Œå¹¶ä¸”åŠ äº†ç¾¤ï¼Œå¤§å®¶
      
    
    </summary>
    
    
      <category term="æŠ˜è…¾" scheme="https://github.com/Tit1e/tags/%E6%8A%98%E8%85%BE/"/>
    
      <category term="å­¦ä¹ " scheme="https://github.com/Tit1e/tags/%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="node" scheme="https://github.com/Tit1e/tags/node/"/>
    
  </entry>
  
  <entry>
    <title>pm2 åŸºç¡€ä½¿ç”¨æŒ‡å—</title>
    <link href="https://github.com/Tit1e/2020/12/24/141-pm2/"/>
    <id>https://github.com/Tit1e/2020/12/24/141-pm2/</id>
    <published>2020-12-24T06:18:09.000Z</published>
    <updated>2020-12-24T07:00:15.999Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://github.com/Unitech/pm2">pm2</a> æˆ‘æƒ³ç”¨ Node.js åœ¨æœåŠ¡å™¨ä¸Šæ­è¿‡æœåŠ¡çš„åº”è¯¥éƒ½çŸ¥é“ã€‚å› ä¸ºæ­£å¸¸æƒ…å†µè·‘ node æœåŠ¡éœ€è¦åœ¨ç»ˆç«¯æ‰§è¡Œ <code>node inde.js</code> å‘½ä»¤ï¼Œè€ŒæœåŠ¡å™¨æˆ‘ä»¬ä¸€èˆ¬æ˜¯ä½¿ç”¨ç»ˆç«¯é€šè¿‡ SSH è¿œç¨‹è¿æ¥ï¼Œæˆ‘ä»¬ä¸å¯èƒ½ä¸€ç›´ä¿æŒä¸æœåŠ¡å™¨çš„è¿æ¥ï¼Œä¹Ÿä¸å¯èƒ½ä¸€ç›´å¼€ç€è¿è¡ŒæœåŠ¡çš„ç»ˆç«¯çª—å£ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå·¥å…·æ¥å¸®å¿™æŒ‚ç€è¿™ä¸ªæœåŠ¡ï¼Œpm2 å°±æ˜¯è¿™ä¹ˆä¸ªå·¥å…·ã€‚</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm install pm2 -g</span><br></pre></td></tr></table></figure><h2 id="åŸºç¡€ç”¨æ³•"><a href="#åŸºç¡€ç”¨æ³•" class="headerlink" title="åŸºç¡€ç”¨æ³•"></a>åŸºç¡€ç”¨æ³•</h2><h4 id="å¯åŠ¨æŸä¸ªæœåŠ¡"><a href="#å¯åŠ¨æŸä¸ªæœåŠ¡" class="headerlink" title="å¯åŠ¨æŸä¸ªæœåŠ¡"></a>å¯åŠ¨æŸä¸ªæœåŠ¡</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># --watch è¡¨ç¤ºï¼šæœåŠ¡æ–‡ä»¶å‘ç”Ÿå˜åŒ–æ—¶ï¼Œpm2ä¼šè‡ªåŠ¨å¸®ä½ é‡å¯æœåŠ¡</span></span><br><span class="line">pm2 start app.js --watch</span><br><span class="line">ä»¥ xxx ä¸ºå‘½åå¯åŠ¨è¿›ç¨‹</span><br><span class="line">pm2 start app.js --watch --name xxx</span><br></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹å¯åŠ¨ä¸­çš„æœåŠ¡"><a href="#æŸ¥çœ‹å¯åŠ¨ä¸­çš„æœåŠ¡" class="headerlink" title="æŸ¥çœ‹å¯åŠ¨ä¸­çš„æœåŠ¡"></a>æŸ¥çœ‹å¯åŠ¨ä¸­çš„æœåŠ¡</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 list</span><br></pre></td></tr></table></figure><p><img src="https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-12-24-063206.png" alt></p><h4 id="åœæ­¢æŸä¸ªæˆ–å…¨éƒ¨æœåŠ¡"><a href="#åœæ­¢æŸä¸ªæˆ–å…¨éƒ¨æœåŠ¡" class="headerlink" title="åœæ­¢æŸä¸ªæˆ–å…¨éƒ¨æœåŠ¡"></a>åœæ­¢æŸä¸ªæˆ–å…¨éƒ¨æœåŠ¡</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">pm2 stop name || id || <span class="string">'all'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¯”å¦‚æˆ‘è¦åœæ­¢ä¸Šå›¾ä¸­åä¸º JinYa çš„è¿™ä¸ªæœåŠ¡</span></span><br><span class="line">pm2 stop JinYa</span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">pm2 stop 2</span><br><span class="line"><span class="comment"># å¦‚æœåœæ­¢å…¨éƒ¨</span></span><br><span class="line">pm2 stop all</span><br></pre></td></tr></table></figure><h4 id="é‡å¯æŸä¸ªæˆ–å…¨éƒ¨æœåŠ¡"><a href="#é‡å¯æŸä¸ªæˆ–å…¨éƒ¨æœåŠ¡" class="headerlink" title="é‡å¯æŸä¸ªæˆ–å…¨éƒ¨æœåŠ¡"></a>é‡å¯æŸä¸ªæˆ–å…¨éƒ¨æœåŠ¡</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">pm2 restart name || id || <span class="string">'all'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¯”å¦‚æˆ‘è¦é‡å¯ä¸Šå›¾ä¸­åä¸º JinYa çš„è¿™ä¸ªæœåŠ¡</span></span><br><span class="line">pm2 restart JinYa</span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">pm2 restart 2</span><br><span class="line"><span class="comment"># å¦‚æœåœæ­¢å…¨éƒ¨</span></span><br><span class="line">pm2 restart all</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤æŸä¸ªæˆ–å…¨éƒ¨æœåŠ¡"><a href="#åˆ é™¤æŸä¸ªæˆ–å…¨éƒ¨æœåŠ¡" class="headerlink" title="åˆ é™¤æŸä¸ªæˆ–å…¨éƒ¨æœåŠ¡"></a>åˆ é™¤æŸä¸ªæˆ–å…¨éƒ¨æœåŠ¡</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">pm2 delete name || id || <span class="string">'all'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¯”å¦‚æˆ‘è¦é‡å¯ä¸Šå›¾ä¸­åä¸º JinYa çš„è¿™ä¸ªæœåŠ¡</span></span><br><span class="line">pm2 delete JinYa</span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">pm2 delete 2</span><br><span class="line"><span class="comment"># å¦‚æœåœæ­¢å…¨éƒ¨</span></span><br><span class="line">pm2 delete all</span><br></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹æŸä¸ªæœåŠ¡çš„æè¿°"><a href="#æŸ¥çœ‹æŸä¸ªæœåŠ¡çš„æè¿°" class="headerlink" title="æŸ¥çœ‹æŸä¸ªæœåŠ¡çš„æè¿°"></a>æŸ¥çœ‹æŸä¸ªæœåŠ¡çš„æè¿°</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 describe name || id</span><br></pre></td></tr></table></figure><p>å¦‚æœæœåŠ¡å™¨ä¸Šæœ‰åå‡ ç”šè‡³å‡ åä¸ªæœåŠ¡ï¼Œé‚£ä¹ˆä¸€ä¸ªä¸€ä¸ªå¯åŠ¨å°±æ˜¾å¾—ååˆ†ç¹çï¼Œæ‰€ä»¥ pm2 ä¹Ÿå¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶å¯åŠ¨ã€‚</p><h4 id="é€šè¿‡é…ç½®æ–‡ä»¶æ‰¹é‡å¯åŠ¨"><a href="#é€šè¿‡é…ç½®æ–‡ä»¶æ‰¹é‡å¯åŠ¨" class="headerlink" title="é€šè¿‡é…ç½®æ–‡ä»¶æ‰¹é‡å¯åŠ¨"></a>é€šè¿‡é…ç½®æ–‡ä»¶æ‰¹é‡å¯åŠ¨</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// åˆ›å»ºä¸€ä¸ªåä¸º server.json çš„æ–‡ä»¶</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"apps"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      "name": "server1", // æœåŠ¡åç§°</span><br><span class="line">      "script": "./xxx/index.js", // æœåŠ¡å…¥å£æ–‡ä»¶è·¯å¾„</span><br><span class="line">      "watch": true // ç›‘å¬æœåŠ¡ï¼ŒæœåŠ¡å‘ç”Ÿå˜åŒ–æ—¶è‡ªåŠ¨é‡å¯</span><br><span class="line">    &#125;,</span><br><span class="line">   &#123;</span><br><span class="line">      <span class="attr">"name"</span>: <span class="string">"server2"</span>,</span><br><span class="line">      <span class="attr">"script"</span>: <span class="string">"./xxx/app.js"</span>,</span><br><span class="line">      <span class="attr">"watch"</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 start server.json</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ <code>stop</code>ã€<code>restar</code>ã€<code>delete</code> å‘½ä»¤å…¶å®éƒ½å¯é€šè¿‡ json æ–‡ä»¶æ¥æ‰¹é‡æ‰§è¡Œã€‚</p><h4 id="æŸ¥çœ‹è¿›ç¨‹èµ„æºæ¶ˆè€—æƒ…å†µ"><a href="#æŸ¥çœ‹è¿›ç¨‹èµ„æºæ¶ˆè€—æƒ…å†µ" class="headerlink" title="æŸ¥çœ‹è¿›ç¨‹èµ„æºæ¶ˆè€—æƒ…å†µ"></a>æŸ¥çœ‹è¿›ç¨‹èµ„æºæ¶ˆè€—æƒ…å†µ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 monit</span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™äº›å‘½ä»¤åªæ˜¯ä¸€äº›æˆ‘åœ¨æ—¥å¸¸ä½¿ç”¨ä¸­ç»å¸¸ç”¨åˆ°çš„åŸºç¡€å‘½ä»¤ï¼Œpm2 è¿™ä¸ªå·¥å…·æ‰€èƒ½åšçš„è¿œè¿œä¸æ­¢è¿™äº›ã€‚å®ƒè¿˜å¯ä»¥åšè´Ÿè½½å‡è¡¡ï¼Œå†…å­˜ç›‘æ§ç­‰å…¶ä»–å¾ˆå¤šäº‹æƒ…ï¼Œåªæ˜¯æˆ‘çš„åº”ç”¨åœºæ™¯æ²¡ç”¨é‚£ä¹ˆå¤æ‚ï¼Œæ‰€ä»¥å¹¶æ²¡æœ‰æ·±å…¥äº†è§£è¿™äº›åŠŸèƒ½ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://github.com/Unitech/pm2&quot;&gt;pm2&lt;/a&gt; æˆ‘æƒ³ç”¨ Node.js åœ¨æœåŠ¡å™¨ä¸Šæ­è¿‡æœåŠ¡çš„åº”è¯¥éƒ½çŸ¥é“ã€‚å› ä¸ºæ­£å¸¸æƒ…å†µè·‘ node æœåŠ¡éœ€è¦åœ¨ç»ˆç«¯æ‰§è¡Œ &lt;code&gt;node inde.js&lt;/code&gt; å‘½ä»¤ï¼Œè€ŒæœåŠ¡å™¨æˆ‘ä»¬ä¸€èˆ¬
      
    
    </summary>
    
    
      <category term="æŠ˜è…¾" scheme="https://github.com/Tit1e/tags/%E6%8A%98%E8%85%BE/"/>
    
      <category term="å­¦ä¹ " scheme="https://github.com/Tit1e/tags/%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>ç”¨å¿«æ·æŒ‡ä»¤å¿«é€Ÿæ‰“å¼€æ”¯ä»˜ç ã€æ‰«ä¸€æ‰«æˆ–æ”¯ä»˜å®æŒ‡å®šå°ç¨‹åº</title>
    <link href="https://github.com/Tit1e/2020/12/23/140-alipay-shortcuts/"/>
    <id>https://github.com/Tit1e/2020/12/23/140-alipay-shortcuts/</id>
    <published>2020-12-23T05:26:57.000Z</published>
    <updated>2020-12-24T02:13:49.454Z</updated>
    
    <content type="html"><![CDATA[<p>é¦–å…ˆè¯´è¯´ä½¿ç”¨å¿«æ·æŒ‡ä»¤æ‰“å¼€æ”¯ä»˜ç ã€æ‰«ä¸€æ‰«ç­‰åŠŸèƒ½çš„å¥½å¤„ï¼Œå› ä¸ºåœ¨ios14ä¸‹ï¼Œæ”¯ä»˜å®è‡ªå¸¦çš„å°ç»„ä»¶å°±æœ‰è¿™ä¸ªåŠŸèƒ½ã€‚</p><ol><li>å°ç»„ä»¶ä¸Šçš„åŠŸèƒ½æ˜¯å›ºå®šçš„ï¼Œæ— æ³•è‡ªå®šä¹‰ã€‚</li><li>å°ç»„ä»¶æ ·å¼ä¸ä¸€å®šç¬¦åˆç”¨æˆ·å®¡ç¾ï¼ˆè‡³å°‘ä¸ç¬¦åˆæˆ‘çš„å®¡ç¾ï¼Œä¸ç„¶æˆ‘ä¹Ÿä¸ä¼šå†™è¿™ç¯‡æ–‡ç« ï¼‰ã€‚</li><li>å°ç»„ä»¶å ç”¨å±å¹•ç©ºé—´å¤§ï¼Œé™ä½äº†å±å¹•çš„ä½¿ç”¨æ•ˆç‡ã€‚</li></ol><p>è¿™æ˜¯æ”¯ä»˜å®å°ç»„ä»¶çš„æ•ˆæœï¼š</p><p><img src="https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-12-23-IMG_7334.jpg?imageMogr2/thumbnail/!40p" alt></p><p>åªæ˜¯ä½¿ç”¨å¿«æ·æŒ‡ä»¤çš„æ•ˆæœï¼Œå›¾ä¸Šçš„ä»˜æ¬¾ç ï¼Œæ‰«ä¸€æ‰«å’Œå®å—’å‡ºè¡Œéƒ½æ˜¯æ”¯ä»˜å®çš„åŠŸèƒ½å¿«æ·æŒ‡ä»¤åŒ–ï¼š</p><p><img src="https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-12-23-IMG_7335.jpg?imageMogr2/thumbnail/!40p" alt></p><p>ä½¿ç”¨æ•ˆæœå¦‚ä¸‹ï¼š</p><div id="dplayer1" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer1"),"video":{"url":"https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-12-23-140-alipay-shortcuts.mp4","pic":"https://photo-album-1251959693.cos.ap-nanjing.myqcloud.com/video-poster.png"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script><p>å¯ä»¥çœ‹å‡ºä½¿ç”¨æ•ˆæœä¸Šå¹¶æ²¡æœ‰å¤ªå¤§çš„å·®åˆ«ï¼Œéƒ½æ˜¯ç‚¹å‡»å›¾æ ‡éƒ½ç›´æ¥è¿›å…¥æ‰«ç ç•Œé¢ï¼Œæ²¡æœ‰å¤šä½™çš„æ­¥éª¤ã€‚</p><h2 id="å®ç°è¿‡ç¨‹"><a href="#å®ç°è¿‡ç¨‹" class="headerlink" title="å®ç°è¿‡ç¨‹"></a>å®ç°è¿‡ç¨‹</h2><p>å®ç°è¿™ä¸ªæ•ˆæœå¾ˆç®€å•</p><ol><li>æ–°å»ºä¸€ä¸ªå¿«æ·æŒ‡ä»¤</li><li>æ‰“å¼€æŒ‡å®š url</li><li>ä¿å­˜å¹¶æ·»åŠ åˆ°æ¡Œé¢</li></ol><p><img src="https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-12-23-IMG_7336.png?imageMogr2/thumbnail/!40p" alt></p><p>å¦‚ä½•å°†å¿«æ·æŒ‡ä»¤å‘é€åˆ°æ¡Œé¢å¯ä»¥å‚è€ƒ<a href="https://evolly.one/2020/12/17/138-ios-desktop/" target="_blank" rel="noopener">æ¡Œé¢ç¾åŒ–</a>è¿™ç¯‡æ–‡ç« ã€‚</p><p>ä¸Šé¢é€”ä¸­å±•ç¤ºçš„æ‰«ä¸€æ‰«çš„é“¾æ¥ï¼Œæˆ‘è¿™é‡Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„åŠŸèƒ½é“¾æ¥ï¼Œæœ‰éœ€è¦è‡ªå–ã€‚</p><ul><li><p>å¥åº·ç : alipays://platformapi/startapp?appId=2021001139676873</p></li><li><p>å¾®ä¿¡æ‰«ç : weixin://scanqrcode</p></li><li><p>æ”¯ä»˜å®æ‰«ä¸€æ‰«: alipayqr://platformapi/startapp?saId=10000007</p></li><li><p>æ”¯ä»˜å®ä»˜æ¬¾ç : alipayqr://platformapi/startapp?saId=20000056</p></li><li><p>æ”¯ä»˜å®æ”¶æ¬¾ç : alipayqr://platformapi/startapp?saId=20000123</p></li><li><p>æ”¯ä»˜å®ä¹˜è½¦ç : alipayqr://platformapi/startapp?saId=200011235</p></li><li><p>æ”¯ä»˜å®æŸ¥å¿«é€’: alipays://platformapi/startapp?appId=20000754</p></li><li><p>èš‚èšåº„å›­: alipays://platformapi/startapp?appId=66666674</p></li><li><p>èš‚èšæ£®æ—ï¼š alipays://platformapi/startapp?appId=60000002</p></li></ul><p>ä¸Šé¢è¿™äº›éƒ½æ˜¯ç°æˆçš„ï¼Œä½†ä»”ç»†è§‚å¯Ÿå¯ä»¥å‘ç°ä¸Šé¢è¿™äº›é“¾æ¥ä¸­ï¼Œå…¶å®ä¸ä¸€æ ·çš„åªæ˜¯åœ°å€ä¸­çš„ appIdä¸åŒï¼Œå…¶ä»–éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥æ˜¯ä¸æ˜¯åªè¦æœ‰åº”ç”¨çš„ appIdï¼Œå°±å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼å®ç°å¿«é€Ÿæ‰“å¼€åº”ç”¨ï¼Ÿ</p><p>çš„ç¡®å¯ä»¥ï¼Œæ¯”å¦‚æˆ‘è‡ªå·±åšäº†ä¸€ä¸ªå®å—’å‡ºè¡Œçš„å¿«æ·æ–¹å¼ï¼Œè¿™æ˜¯ä¸€ä¸ªæ”¯ä»˜å®å†…åµŒçš„å°ç¨‹åºï¼Œæ”¯ä»˜å®ä¹Ÿæ”¯æŒæ·»åŠ æ¡Œé¢ä¹¦ç­¾ï¼Œä½†è¿™ç§æ–¹å¼ä¼šåœ¨æ‰“å¼€è¿‡ç¨‹ä¸­åšä¸€æ¬¡è·³è½¬ï¼Œä½“éªŒéå¸¸å·®ã€‚</p><p>ä¸‹é¢è¯´ä¸€ä¸‹æå–ç¨‹åºä¸­çš„ appId çš„æ–¹å¼ï¼š</p><ol><li><p>åœ¨æ”¯ä»˜å®ä¸­æ‰“å¼€è¦æ·»åŠ çš„ç¨‹åºï¼Œç‚¹å‡»ç¨‹åºå³ä¸Šè§’çš„ä¸‰ä¸ªç‚¹ï¼Œåœ¨ä¸‹æ–¹å¼¹å‡ºåŠŸèƒ½èœå•ã€‚</p><p><img src="https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-12-23-IMG_7340-1.png?imageMogr2/thumbnail/!40p" alt></p></li><li><p>ç‚¹å‡»ä¸‹æ–¹çš„ã€æ·»åŠ åˆ°æ¡Œé¢ã€‘è¿™æ—¶å°ç¨‹åºä¼šåœ¨æµè§ˆå™¨æ‰“å¼€ä¸€ä¸ªé¡µé¢ï¼Œä¸Šé¢ä¼šæœ‰æ·»åŠ åˆ°æ¡Œé¢çš„æ•™ç¨‹ã€‚</p><p><img src="https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-12-23-IMG_7341.jpg?imageMogr2/thumbnail/!40p" alt></p></li><li><p>å¤åˆ¶æµè§ˆå™¨åœ°å€</p></li><li><p>ä»åœ°å€ä¸­æå– appId</p></li></ol><p>è¿™æ—¶æˆ‘å¤åˆ¶å‡ºæ¥çš„åœ°å€ï¼š</p><p><code>https://render.alipay.com/p/s/shortcut/index?appId=2018110161946659&amp;appName=å®å—’å‡ºè¡Œ&amp;appIcon=https://appstoreisvpic.alipayobjects.com/prod/f38acc92-21a5-48be-9a66-8a69474b672a.png@120w.png</code></p><p>åœ°å€ä¸­çš„ <code>appId=2018110161946659</code> è¿™ä¸² appId å°±æ˜¯æˆ‘ä»¬è¦æ‰¾çš„ã€‚</p><p>æ‰¾åˆ°è¿™ä¸² id åï¼Œæˆ‘ä»¬æŠŠ id è·Ÿå‰é¢çš„çš„é‚£ä¸²åœ°å€æ‹¼åˆ°ä¸€èµ· <code>alipays://platformapi/startapp?appId=2018110161946659</code>ï¼Œç„¶ååœ¨å¿«æ·æŒ‡ä»¤ä¸­æ–°å»ºä¸€ä¸ªæŒ‡ä»¤å°±å®Œæˆäº†ã€‚</p><p>çœ‹ä¸€ä¸‹åŸæ¥çš„æ‰“å¼€æ–¹å¼è·Ÿç”¨å¿«æ·æŒ‡ä»¤æ‰“å¼€çš„åŒºåˆ«ï¼š</p><div id="dplayer2" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer2"),"video":{"url":"https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-12-23-140-alipay-shortcuts2.mp4","pic":"https://photo-album-1251959693.cos.ap-nanjing.myqcloud.com/video-poster.png"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script><p>å¾®ä¿¡å¦‚æœå¯ä»¥æ‹¿åˆ° appId ä¹Ÿå¯ä»¥ä½¿ç”¨è¿™ç§æ–¹å¼æ“ä½œã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;é¦–å…ˆè¯´è¯´ä½¿ç”¨å¿«æ·æŒ‡ä»¤æ‰“å¼€æ”¯ä»˜ç ã€æ‰«ä¸€æ‰«ç­‰åŠŸèƒ½çš„å¥½å¤„ï¼Œå› ä¸ºåœ¨ios14ä¸‹ï¼Œæ”¯ä»˜å®è‡ªå¸¦çš„å°ç»„ä»¶å°±æœ‰è¿™ä¸ªåŠŸèƒ½ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å°ç»„ä»¶ä¸Šçš„åŠŸèƒ½æ˜¯å›ºå®šçš„ï¼Œæ— æ³•è‡ªå®šä¹‰ã€‚&lt;/li&gt;
&lt;li&gt;å°ç»„ä»¶æ ·å¼ä¸ä¸€å®šç¬¦åˆç”¨æˆ·å®¡ç¾ï¼ˆè‡³å°‘ä¸ç¬¦åˆæˆ‘çš„å®¡ç¾ï¼Œä¸ç„¶æˆ‘ä¹Ÿä¸ä¼šå†™è¿™ç¯‡æ–‡ç« ï¼‰ã€‚&lt;/li&gt;
      
    
    </summary>
    
    
      <category term="æŠ˜è…¾" scheme="https://github.com/Tit1e/tags/%E6%8A%98%E8%85%BE/"/>
    
  </entry>
  
  <entry>
    <title>js ä¸Šä¼ æ–‡ä»¶è‡³è…¾è®¯äº‘å¯¹è±¡å­˜å‚¨</title>
    <link href="https://github.com/Tit1e/2020/12/19/139-upload-tencent-cloud/"/>
    <id>https://github.com/Tit1e/2020/12/19/139-upload-tencent-cloud/</id>
    <published>2020-12-19T14:43:25.000Z</published>
    <updated>2020-12-19T15:59:26.276Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©ç»ˆäºæŠŠè‡ªå·±çš„æ‘„å½±å±•ç¤ºç½‘ç«™å‘å¸ƒåˆ°äº†çº¿ä¸Šã€‚<a href="https://album.animalcrossing.life" target="_blank" rel="noopener">æŸ¥çœ‹ç½‘ç«™</a></p><p>è¿™ä¸ªç½‘ç«™æ•´ä½“å¹¶ä¸å¤æ‚ï¼Œä½†æ˜¯å…¶ä¸­ä¹Ÿæœ‰ä¸å°‘å€¼å¾—è®°å½•çš„éš¾ç‚¹ï¼Œæ¯”å¦‚ä»å‰ç«¯ä¸Šä¼ æ–‡ä»¶è‡³è…¾è®¯äº‘çš„å¯¹è±¡å­˜å‚¨ï¼Œå…¬å¸ä¸šåŠ¡ä¸­æˆ‘ä½¿ç”¨è¿‡ä¸ƒç‰›çš„äº‘å­˜å‚¨ï¼Œè…¾è®¯çš„è¿˜ä»æœªæ¥è§¦è¿‡ã€‚æœ¬ä»¥ä¸ºåº”è¯¥è·Ÿä¸ƒç‰›çš„å·®ä¸å¤šï¼Œä½†æ²¡æƒ³åˆ°æˆ‘è´¹äº†å¥½å¤§çš„åŠ›æ°”å„ç§çœ‹æ–‡æ¡£ã€çœ‹åˆ«äººçš„åšå®¢æ‰æˆåŠŸä¸Šä¼ ã€‚</p><p>åæ§½ä¸€å¥è…¾è®¯çš„æ–‡æ¡£å†™çš„çœŸçš„å¥½å·®ã€‚</p><p>ä¸‹é¢åˆ†äº«ä¸€ä¸‹æˆ‘çš„ä¸Šä¼ é…ç½®åŠæµç¨‹ï¼š</p><p>æ•´ä¸ªæµç¨‹éœ€è¦å‰ç«¯å’Œåç«¯çš„é…åˆï¼Œæ‰€ä»¥ä»£ç ä¼šåˆ†ä¸ºå‰ç«¯ä»£ç ä¸åç«¯ä»£ç ä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸‹é¢æˆ‘ä¼šæ³¨æ˜ã€‚åç«¯æˆ‘ç”¨çš„æ˜¯ Node.jsã€‚</p><h2 id="ä¸Šä¼ æµç¨‹è¯´æ˜"><a href="#ä¸Šä¼ æµç¨‹è¯´æ˜" class="headerlink" title="ä¸Šä¼ æµç¨‹è¯´æ˜"></a>ä¸Šä¼ æµç¨‹è¯´æ˜</h2><p>ä¸Šä¼ çš„æ•´ä½“æµç¨‹å¤§æ¦‚æ˜¯è¿™æ ·ï¼š</p><p>1ã€ä¸Šä¼ å‰ï¼Œå‰ç«¯å‘èµ·è¯·æ±‚å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚è·å–ä¸Šä¼ çš„ä¸´æ—¶å¯†é’¥</p><p>2ã€æœåŠ¡å™¨ç«¯æ”¶åˆ°è¯·æ±‚ï¼Œé€šè¿‡è…¾è®¯å®˜æ–¹çš„ sdk è®¡ç®—å‡ºä¸´æ—¶å¯†é’¥å¹¶è¿”å›ç»™å‰ç«¯</p><p>3ã€å‰ç«¯è·å–åˆ°ä¸´æ—¶å¯†é’¥ï¼Œè·å–é€‰æ‹©çš„æ–‡ä»¶ï¼Œè®¡ç®— md5 å€¼ä½œä¸ºæ–‡ä»¶åï¼ˆè¿™æ ·ç›¸åŒæ–‡ä»¶å°±ä¸ä¼šé‡å¤ä¸Šä¼ ï¼‰</p><p>4ã€é€šè¿‡å®˜æ–¹çš„ sdk è¿›è¡Œä¸Šä¼ ï¼Œåœ¨å›è°ƒä¸­å¤„ç†ä¸Šä¼ åçš„é€»è¾‘</p><p>##åç«¯ä»£ç  Node.js</p><p>åŸºç¡€çš„æœåŠ¡è¿è¡Œç¯å¢ƒæˆ‘å°±ä¸åšå±•å¼€äº†ï¼Œåªè®²è·å–ä¸´æ—¶å¯†é’¥çš„è¿‡ç¨‹ã€‚</p><p>é¦–å…ˆéœ€è¦å®‰è£… qcloud-cos-sts ä¾èµ–ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install qcloud-cos-sts --save</span><br></pre></td></tr></table></figure><p>ç„¶åå°±æ˜¯åœ¨ä½ è¯·æ±‚çš„æ–¹æ³•æ–‡ä»¶ä¸­ç¼–å†™ä»£ç ï¼Œä¸ªäººè§†ä¸åŒè¯·æ±‚è€Œå®šï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™æ˜¯æˆ‘çš„æ–‡ä»¶ upload.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼•å…¥ä¾èµ–</span></span><br><span class="line"><span class="keyword">const</span> STS = <span class="built_in">require</span>(<span class="string">'qcloud-cos-sts'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰é…ç½®é¡¹</span></span><br><span class="line"><span class="comment">// å¯†é’¥å¯ä»è…¾è®¯äº‘æ§åˆ¶å°çš„ã€APIå¯†é’¥ç®¡ç†ã€‘ä¸­è·å–ï¼šhttps://console.cloud.tencent.com/cam/capi</span></span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">  secretId: <span class="string">'ä½ çš„å›ºå®šå¯†é’¥'</span>, <span class="comment">// æ›¿æ¢ä½ çš„å›ºå®šå¯†é’¥</span></span><br><span class="line">  secretKey: <span class="string">'ä½ çš„å›ºå®šå¯†é’¥'</span>, <span class="comment">// æ›¿æ¢ä½ çš„å›ºå®šå¯†é’¥</span></span><br><span class="line">  proxy: <span class="string">''</span>,</span><br><span class="line">  durationSeconds: <span class="number">6000</span>, <span class="comment">// å¯†é’¥æœ‰æ•ˆæœŸ</span></span><br><span class="line">  <span class="comment">// æ”¾è¡Œåˆ¤æ–­ç›¸å…³å‚æ•°</span></span><br><span class="line">  bucket: <span class="string">'bucketåå­—'</span>, <span class="comment">// æ¢æˆä½ çš„ bucket</span></span><br><span class="line">  region: <span class="string">'bucket åœ°åŒº'</span>, <span class="comment">// æ¢æˆ bucket æ‰€åœ¨åœ°åŒº</span></span><br><span class="line">  allowPrefix: <span class="string">'*'</span>, <span class="comment">// è¿™é‡Œæ”¹æˆå…è®¸çš„è·¯å¾„å‰ç¼€ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±ç½‘ç«™çš„ç”¨æˆ·ç™»å½•æ€åˆ¤æ–­å…è®¸ä¸Šä¼ çš„å…·ä½“è·¯å¾„ï¼Œä¾‹å­ï¼š a.jpg æˆ–è€… a/* æˆ–è€… * (ä½¿ç”¨é€šé…ç¬¦*å­˜åœ¨é‡å¤§å®‰å…¨é£é™©, è¯·è°¨æ…è¯„ä¼°ä½¿ç”¨)</span></span><br><span class="line">  allowActions: [</span><br><span class="line">    <span class="comment">// æ‰€æœ‰ action è¯·çœ‹æ–‡æ¡£ https://cloud.tencent.com/document/product/436/31923</span></span><br><span class="line">    <span class="comment">// ç®€å•ä¸Šä¼ </span></span><br><span class="line">    <span class="string">'name/cos:PutObject'</span>,</span><br><span class="line">    <span class="string">'name/cos:PostObject'</span>,</span><br><span class="line">    <span class="comment">// åˆ†ç‰‡ä¸Šä¼ </span></span><br><span class="line">    <span class="string">'name/cos:sliceUploadFile'</span>,</span><br><span class="line">    <span class="string">'name/cos:InitiateMultipartUpload'</span>,</span><br><span class="line">    <span class="string">'name/cos:ListMultipartUploads'</span>,</span><br><span class="line">    <span class="string">'name/cos:ListParts'</span>,</span><br><span class="line">    <span class="string">'name/cos:UploadPart'</span>,</span><br><span class="line">    <span class="string">'name/cos:CompleteMultipartUpload'</span>,</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ‘ç”¨çš„æ˜¯expressï¼Œæ‰€ä»¥æ¥å£æ–¹æ³•è¿™æ ·å†™ï¼Œæœ€å¤–å±‚çš„æ–¹æ³•æ— æ‰€è°“ï¼Œæ¯ä¸ªäººéƒ½ä¸ä¸€æ ·ï¼Œä¸»è¦æ˜¯é‡Œé¢çš„å†…å®¹</span></span><br><span class="line"></span><br><span class="line">router.get(<span class="string">'/upload/sts'</span>, (req, res) =&gt; &#123;</span><br><span class="line">  <span class="comment">// è·å–ä¸´æ—¶å¯†é’¥</span></span><br><span class="line">  <span class="keyword">const</span> shortBucketName = config.bucket.substr(<span class="number">0</span>, config.bucket.lastIndexOf(<span class="string">'-'</span>));</span><br><span class="line">  <span class="keyword">const</span> appId = config.bucket.substr(<span class="number">1</span> + config.bucket.lastIndexOf(<span class="string">'-'</span>));</span><br><span class="line">  <span class="keyword">const</span> policy = &#123;</span><br><span class="line">    version: <span class="string">'2.0'</span>,</span><br><span class="line">    statement: [&#123;</span><br><span class="line">      action: config.allowActions,</span><br><span class="line">      effect: <span class="string">'allow'</span>,</span><br><span class="line">      principal: &#123; <span class="attr">qcs</span>: [<span class="string">'*'</span>] &#125;,</span><br><span class="line">      resource: [</span><br><span class="line">        <span class="string">`qcs::cos:<span class="subst">$&#123;config.region&#125;</span>:uid/<span class="subst">$&#123;appId&#125;</span>:prefix//<span class="subst">$&#123;appId&#125;</span>/<span class="subst">$&#123;shortBucketName&#125;</span>/<span class="subst">$&#123;config.allowPrefix&#125;</span>`</span>,</span><br><span class="line">      ],</span><br><span class="line">    &#125;],</span><br><span class="line">  &#125;;</span><br><span class="line">  STS.getCredential(&#123;</span><br><span class="line">    secretId: config.secretId,</span><br><span class="line">    secretKey: config.secretKey,</span><br><span class="line">    proxy: config.proxy,</span><br><span class="line">    durationSeconds: config.durationSeconds,</span><br><span class="line">    policy,</span><br><span class="line">  &#125;, (err, tempKeys) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> result = err || tempKeys || <span class="string">''</span>;</span><br><span class="line">    res.json(<span class="keyword">new</span> Result(&#123; <span class="attr">data</span>: result &#125;));</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å­˜å‚¨æ¡¶çš„ç›¸å…³ä¿¡æ¯å¯ä»¥åœ¨æ§åˆ¶å°çš„å­˜å‚¨æ¡¶çš„ã€æ¦‚è§ˆã€‘ä¸­æŸ¥çœ‹ã€‚</p><p>æ³¨æ„ï¼š<strong>å­˜å‚¨æ¡¶æ‰€åœ¨åœ°åŸŸåªéœ€æ‹¬å·ä¸­çš„å†…å®¹ï¼Œä¸éœ€è¦ä¸­æ–‡</strong>ã€‚</p><p><img src="https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-12-19-153605.png" alt></p><p>åç«¯è®¡ç®—ä¸´æ—¶å¯†é’¥çš„æ–¹æ³•å°±æ˜¯ä»¥ä¸Šè¿™äº›äº†ã€‚</p><h2 id="å‰ç«¯ä»£ç "><a href="#å‰ç«¯ä»£ç " class="headerlink" title="å‰ç«¯ä»£ç "></a>å‰ç«¯ä»£ç </h2><p>åœ¨é…ç½®æ–‡ä»¶ä¸­å®šä¹‰å¥½åŸºç¡€ä¿¡æ¯</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @/utils/cosConf.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  Bucket: <span class="string">''</span>, <span class="comment">// Bucket åç§°</span></span><br><span class="line">  Region: <span class="string">''</span>, <span class="comment">// Bucket åœ°åŸŸ</span></span><br><span class="line">  Domain: <span class="string">''</span>, <span class="comment">// Bucket è®¿é—®åŸŸå</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç„¶åå®‰è£…ä»¥ä¸‹ä¾èµ–</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install cos-js-sdk-v5 spark-md5 --save</span><br></pre></td></tr></table></figure><p>å…·ä½“ä¸Šä¼ ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> COS <span class="keyword">from</span> <span class="string">'cos-js-sdk-v5'</span>;</span><br><span class="line"><span class="keyword">import</span> SparkMD5 <span class="keyword">from</span> <span class="string">'spark-md5'</span>;</span><br><span class="line"><span class="comment">// è¿™ä¸ªæ–¹æ³•æ˜¯æ–‡ç« ä¸­ä¸Šé¢å†™çš„è·å–ä¸´æ—¶å¯†é’¥çš„è¯·æ±‚æ–¹æ³•</span></span><br><span class="line"><span class="keyword">import</span> &#123; sts &#125; <span class="keyword">from</span> <span class="string">'@/api/upload'</span>;</span><br><span class="line"><span class="comment">// ä¸Šé¢å®šä¹‰çš„åŸºç¡€ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">import</span> cosConfig <span class="keyword">from</span> <span class="string">'./cosConf'</span>;</span><br><span class="line"><span class="keyword">let</span> key = <span class="string">''</span>;</span><br><span class="line"><span class="comment">// é…ç½®</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–å®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> cos = <span class="keyword">new</span> COS(&#123;</span><br><span class="line">  <span class="keyword">async</span> getAuthorization(options, callback) &#123;</span><br><span class="line">    <span class="comment">// è·å–ä¸´æ—¶å¯†é’¥</span></span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> sts();</span><br><span class="line">    <span class="keyword">const</span> authdata = res.data;</span><br><span class="line">    <span class="keyword">const</span> auth = &#123;</span><br><span class="line">      TmpSecretId: authdata.credentials.tmpSecretId,</span><br><span class="line">      TmpSecretKey: authdata.credentials.tmpSecretKey,</span><br><span class="line">      XCosSecurityToken: authdata.credentials.sessionToken,</span><br><span class="line">      ExpiredTime: authdata.expiredTime, <span class="comment">// åœ¨ExpiredTimeæ—¶é—´å‰ï¼Œä¸ä¼šå†æ¬¡è°ƒç”¨getAuthorization</span></span><br><span class="line">    &#125;;</span><br><span class="line">    callback(auth);</span><br><span class="line">  &#125;,</span><br><span class="line">  FileParallelLimit: <span class="number">3</span>, <span class="comment">// æ–‡ä»¶å¹¶å‘æ•°</span></span><br><span class="line">  ChunkParallelLimit: <span class="number">8</span>, <span class="comment">// åŒä¸€ä¸ªä¸Šä¼ æ–‡ä»¶çš„åˆ†å—å¹¶å‘æ•°</span></span><br><span class="line">  ChunkSize: <span class="number">1024</span> * <span class="number">1024</span> * <span class="number">8</span>, <span class="comment">// åˆ†å—ä¸Šä¼ æ—¶ï¼Œæ¯å—çš„å­—èŠ‚æ•°å¤§å°</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å¾—æ–‡ä»¶md5</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFileMD5</span>(<span class="params">file, callback</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å£°æ˜å¿…è¦çš„å˜é‡</span></span><br><span class="line">  <span class="keyword">const</span> fileReader = <span class="keyword">new</span> FileReader();</span><br><span class="line">  <span class="comment">// æ–‡ä»¶æ¯å—åˆ†å‰²2Mï¼Œè®¡ç®—åˆ†å‰²è¯¦æƒ…</span></span><br><span class="line">  <span class="keyword">const</span> chunkSize = <span class="number">2</span> * <span class="number">1024</span> * <span class="number">1024</span>;</span><br><span class="line">  <span class="keyword">const</span> chunks = <span class="built_in">Math</span>.ceil(file.size / chunkSize);</span><br><span class="line">  <span class="keyword">let</span> currentChunk = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ›å»ºmd5å¯¹è±¡ï¼ˆåŸºäºSparkMD5ï¼‰</span></span><br><span class="line">  <span class="keyword">const</span> spark = <span class="keyword">new</span> SparkMD5();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ¯å—æ–‡ä»¶è¯»å–å®Œæ¯•ä¹‹åçš„å¤„ç†</span></span><br><span class="line">  fileReader.onload = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// æ¯å—äº¤ç”±sparkMD5è¿›è¡Œè®¡ç®—</span></span><br><span class="line">    spark.appendBinary(e.target.result);</span><br><span class="line">    currentChunk += <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœæ–‡ä»¶å¤„ç†å®Œæˆè®¡ç®—MD5ï¼Œå¦‚æœè¿˜æœ‰åˆ†ç‰‡ç»§ç»­å¤„ç†</span></span><br><span class="line">    <span class="keyword">if</span> (currentChunk &lt; chunks) &#123;</span><br><span class="line">      <span class="comment">// eslint-disable-next-line no-use-before-define</span></span><br><span class="line">      loadNext();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      callback(spark.end());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¤„ç†å•ç‰‡æ–‡ä»¶çš„ä¸Šä¼ </span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">loadNext</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> start = currentChunk * chunkSize;</span><br><span class="line">    <span class="keyword">const</span> end = start + chunkSize &gt;= file.size ? file.size : start + chunkSize;</span><br><span class="line"></span><br><span class="line">    fileReader.readAsBinaryString(file.slice(start, end));</span><br><span class="line">  &#125;</span><br><span class="line">  loadNext();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°æ–‡ä»¶ç›´æ¥ä¸Šä¼ -é€šè¿‡putObjectä¸Šä¼ </span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">uploadFile</span>(<span class="params">file, callback, progressBc</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å¾—åˆ°md5ç </span></span><br><span class="line">  getFileMD5(file, (md5) =&gt; &#123;</span><br><span class="line">    <span class="comment">// å­˜å‚¨æ–‡ä»¶çš„md5ç </span></span><br><span class="line">    file.md5 = md5;</span><br><span class="line">    <span class="keyword">const</span> subfix = file.name.substr(file.name.lastIndexOf(<span class="string">'.'</span>));</span><br><span class="line">    key = process.env.VUE_APP_BUCKET_PATH + file.md5 + subfix;</span><br><span class="line">    cos.putObject(&#123;</span><br><span class="line">      Bucket: cosConfig.Bucket,</span><br><span class="line">      Region: cosConfig.Region,</span><br><span class="line">      Key: key,</span><br><span class="line">      Body: file,</span><br><span class="line">      onProgress(progressData) &#123;</span><br><span class="line">        <span class="comment">// ä¸Šä¼ è¿›åº¦</span></span><br><span class="line">        progressBc(progressData.percent);</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;, (err, data) =&gt; &#123;</span><br><span class="line">      <span class="comment">// æˆåŠŸæˆ–å‡ºé”™å›è°ƒ</span></span><br><span class="line">      callback(err, data);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ -é€šè¿‡sliceUploadFileä¸Šä¼ </span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">uploadFile2</span>(<span class="params">file, callback, progressBc</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å¾—åˆ°md5ç </span></span><br><span class="line">  getFileMD5(file, (md5) =&gt; &#123;</span><br><span class="line">    <span class="comment">// å­˜å‚¨æ–‡ä»¶çš„md5ç </span></span><br><span class="line">    file.md5 = md5;</span><br><span class="line">    <span class="keyword">const</span> subfix = file.name.substr(file.name.lastIndexOf(<span class="string">'.'</span>));</span><br><span class="line">    key = process.env.VUE_APP_BUCKET_PATH + file.md5 + subfix;</span><br><span class="line">    cos.sliceUploadFile(&#123;</span><br><span class="line">      Bucket: cosConfig.Bucket,</span><br><span class="line">      Region: cosConfig.Region,</span><br><span class="line">      Key: key,</span><br><span class="line">      Body: file,</span><br><span class="line">      onProgress(progressData) &#123;</span><br><span class="line">        <span class="comment">// ä¸Šä¼ è¿›åº¦</span></span><br><span class="line">        progressBc(progressData.percent);</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;, (err, data) =&gt; &#123;</span><br><span class="line">      callback(err, data);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è°ƒç”¨ä¸Šä¼ çš„è¯ï¼Œåªéœ€è¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;input type=&quot;file&quot; accept=&quot;image/*&quot; ref=&quot;upload&quot; id=&quot;upload&quot;&gt;</span><br><span class="line">    &lt;button @click=&quot;submit&quot;&gt;ä¸Š ä¼ &lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; uploadFile &#125; from &apos;@/utils/uploadfile&apos;;</span><br><span class="line">  export default &#123;</span><br><span class="line">    methods: &#123;</span><br><span class="line">      submit()&#123;</span><br><span class="line">        const file = this.$refs.upload.files[0]</span><br><span class="line">        uploadFile(file, (err, data) =&gt; &#123;</span><br><span class="line">            // å›è°ƒ</span><br><span class="line">            if(!err)&#123;</span><br><span class="line">              // ä¸Šä¼ æˆåŠŸå¤„ç†</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">              // å‡ºé”™å¤„ç†</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;, progress =&gt; &#123;</span><br><span class="line">            // è¿™é‡Œå¯ä»¥è®¾ç½®ä¸Šä¼ è¿›åº¦</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="å­˜å‚¨æ¡¶è®¾ç½®"><a href="#å­˜å‚¨æ¡¶è®¾ç½®" class="headerlink" title="å­˜å‚¨æ¡¶è®¾ç½®"></a>å­˜å‚¨æ¡¶è®¾ç½®</h2><p>æœ€åï¼Œå­˜å‚¨æ¡¶è¿˜éœ€è¦è®¾ç½®è·¨åŸŸè®¿é—®ï¼Œå¦åˆ™å“ªæ€•å‰é¢éƒ½æ­£ç¡®ï¼Œæ–‡ä»¶ä¹Ÿæ— æ³•ä¸Šä¼ ã€‚</p><p>åœ¨å­˜å‚¨æ¡¶çš„ã€å®‰å…¨ç®¡ç†ã€‘-ã€è·¨åŸŸè®¿é—®CORSè®¾ç½®ã€‘ä¸­æ·»åŠ è§„åˆ™ï¼Œè®¾ç½®åŸŸåç™½åå•ï¼Œä¿å­˜ç”Ÿæ•ˆåï¼Œä¸å‡ºæ„å¤–å°±å¯ä»¥æ­£å¸¸ä¸Šä¼ æ–‡ä»¶äº†ã€‚</p><p><img src="https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-12-19-155231.png" alt></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ä»Šå¤©ç»ˆäºæŠŠè‡ªå·±çš„æ‘„å½±å±•ç¤ºç½‘ç«™å‘å¸ƒåˆ°äº†çº¿ä¸Šã€‚&lt;a href=&quot;https://album.animalcrossing.life&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;æŸ¥çœ‹ç½‘ç«™&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªç½‘ç«™æ•´ä½“å¹¶ä¸å¤æ‚ï¼Œä½†æ˜¯å…¶ä¸­ä¹Ÿæœ‰ä¸å°‘å€¼å¾—è®°å½•çš„éš¾
      
    
    </summary>
    
    
      <category term="æŠ˜è…¾" scheme="https://github.com/Tit1e/tags/%E6%8A%98%E8%85%BE/"/>
    
      <category term="å­¦ä¹ " scheme="https://github.com/Tit1e/tags/%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>iOS14 æ¡Œé¢ç¾åŒ–ï¼Œè‡ªå®šä¹‰å›¾æ ‡</title>
    <link href="https://github.com/Tit1e/2020/12/17/138-ios-desktop/"/>
    <id>https://github.com/Tit1e/2020/12/17/138-ios-desktop/</id>
    <published>2020-12-17T14:56:46.000Z</published>
    <updated>2020-12-24T02:27:17.255Z</updated>
    
    <content type="html"><![CDATA[<p>ä¹‹æ‰€ä»¥ç°åœ¨æ‰å†™è¿™ä¸ªæ•™ç¨‹ï¼Œæ˜¯å› ä¸ºiOS14.3å‘å¸ƒåï¼Œé€šè¿‡å¿«æ·æŒ‡ä»¤æ‰“å¼€åº”ç”¨ä¸ç”¨å…ˆæ‰“å¼€å¿«æ·æŒ‡ä»¤ app å†è·³åˆ°æŒ‡å®š app äº†ï¼Œä½†ç›®å‰é€šè¿‡å¿«æ·æŒ‡ä»¤æ‰“å¼€çš„åº”ç”¨ï¼Œæ¯æ¬¡æ‰“å¼€ä¼šå‡ºç°ä¸€ä¸ªå¼¹çª—ï¼Œå¹¶ä¸”è¿™ä¸ªå¼¹çª—æ— æ³•å…³é—­ï¼Œä¹Ÿä¸èƒ½æ‰‹åŠ¨æå‰å…³é—­ã€‚</p><p>å…ˆä¸Šæœ€ç»ˆæ•ˆæœå›¾ï¼š</p><p><img src="https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-12-17-IMG_7227.PNG?imageMogr2/thumbnail/!40p" alt></p><p><img src="https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-12-17-IMG_7228.PNG?imageMogr2/thumbnail/!40p" alt></p><p>ä¹‹å‰å°ç»„ä»¶åˆšå‡ºæ¥çš„æ—¶å€™ä¹ŸæŠ˜è…¾è¿‡ä¸€æ¬¡ï¼Œä½†æ˜¯å› ä¸ºæ‰“å¼€åº”ç”¨è¦è·³è½¬ä¸¤æ¬¡ï¼Œä½“éªŒå¤ªå·®ï¼Œæœ€åä½œç½¢ã€‚è¿™æ¬¡è™½ç„¶è¿˜æœ‰ç‚¹å°ç¼ºé™·ï¼Œä½†ç°åœ¨ä¸ç”¨å†äºŒæ¬¡è·³è½¬ï¼Œè¿™ä¸ªä½“éªŒæå‡å·¨å¤§ï¼Œæ‰€ä»¥åˆå†ä¸€æ¬¡ä¸Šæ‰‹æŠ˜è…¾ï¼Œå¸Œæœ›ä¸‹æ¬¡èƒ½æŠŠå¼¹çª—ä¹Ÿå»æ‰ã€‚</p><div id="dplayer0" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer0"),"video":{"url":"https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-12-24-iosdesktopmute%401080p.mp4","pic":"https://photo-album-1251959693.cos.ap-nanjing.myqcloud.com/video-poster.png"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå°±å¯ä»¥æŠŠåº”ç”¨å›¾æ ‡è®¾ç½®æˆä»»æ„å›¾ç‰‡ã€‚</p><p>è¿™æ˜¯æˆ‘çš„ç´ æåŒ…ï¼Œæœ‰éœ€è¦å¯ä»¥è‡ªå–ï¼š<a href="https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-12-17-icons.zip" target="_blank" rel="noopener">ä¸‹è½½ç´ æåŒ…</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ä¹‹æ‰€ä»¥ç°åœ¨æ‰å†™è¿™ä¸ªæ•™ç¨‹ï¼Œæ˜¯å› ä¸ºiOS14.3å‘å¸ƒåï¼Œé€šè¿‡å¿«æ·æŒ‡ä»¤æ‰“å¼€åº”ç”¨ä¸ç”¨å…ˆæ‰“å¼€å¿«æ·æŒ‡ä»¤ app å†è·³åˆ°æŒ‡å®š app äº†ï¼Œä½†ç›®å‰é€šè¿‡å¿«æ·æŒ‡ä»¤æ‰“å¼€çš„åº”ç”¨ï¼Œæ¯æ¬¡æ‰“å¼€ä¼šå‡ºç°ä¸€ä¸ªå¼¹çª—ï¼Œå¹¶ä¸”è¿™ä¸ªå¼¹çª—æ— æ³•å…³é—­ï¼Œä¹Ÿä¸èƒ½æ‰‹åŠ¨æå‰å…³é—­ã€‚&lt;/p&gt;
&lt;p&gt;å…ˆä¸Šæœ€ç»ˆæ•ˆæœå›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;im
      
    
    </summary>
    
    
      <category term="æŠ˜è…¾" scheme="https://github.com/Tit1e/tags/%E6%8A%98%E8%85%BE/"/>
    
  </entry>
  
  <entry>
    <title>ä¸ºåŸŸåç”³è¯·å…è´¹ https è¯ä¹¦</title>
    <link href="https://github.com/Tit1e/2020/12/15/137-freessl/"/>
    <id>https://github.com/Tit1e/2020/12/15/137-freessl/</id>
    <published>2020-12-15T12:55:58.000Z</published>
    <updated>2020-12-30T13:35:55.495Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©äº”å…­æœˆä»½ä¸Šä¸ªæœåŠ¡å™¨åˆ°æœŸåï¼Œä¸€ç›´æ²¡æœ‰å¼€å§‹æŠ˜è…¾æ–°çš„æœåŠ¡å™¨ï¼Œåªæ˜¯å®‰è£…äº†ä¸€ä¸‹ç¯å¢ƒï¼šnodeï¼ŒNginxï¼ŒMysqlä¹‹ç±»ï¼Œå¾ˆå¤šæœåŠ¡éƒ½æ²¡æœ‰è·‘èµ·æ¥ï¼Œä»Šå¤©ç»ˆäºæ‰“ç®—æŠŠå®ƒé‡æ–°æ¡èµ·æ¥ï¼Œç›®å‰æœåŠ¡éƒ½åŸºæœ¬å·²ç»æ¢å¤ï¼Œè¿›è¡Œå¾—è¿˜ç®—é¡ºåˆ©ï¼Œè¶çƒ­æ‰“é“ï¼ŒæŠŠè’¸è…¾çš„ä¸€äº›ç»è¿‡è®°å½•ä¸€ä¸‹ï¼Œå…¶å®ä¸Šæ¬¡æŠ˜è…¾çš„æ—¶å€™æˆ‘å°±æ‰“ç®—è®°å½•ï¼Œæ— å¥ˆæ‹–å¤ªä¹…ï¼Œå·²ç»å›å¿†ä¸èµ·æ¥äº†ï¼Œåªèƒ½ä½œç½¢ã€‚</p><p>æœåŠ¡å™¨åŸºç¡€çš„ä¸€äº›åŸºç¡€ç¯å¢ƒçš„å®‰è£…ä¹‹å‰å·²ç»å†™è¿‡ä¸€ç¯‡åšå®¢ï¼Œå°±ä¸å†å±•å¼€ï¼Œè¦äº†è§£å¯ä»¥<a href="https://evolly.one/2018/12/14/51-ubuntu-node/" target="_blank" rel="noopener">ç‚¹å‡»è¿™é‡Œ</a>ã€‚</p><p>åŸŸåçš„è´­ä¹°å¤‡æ¡ˆæˆ‘éƒ½åœ¨é˜¿é‡Œäº‘è§£å†³ï¼Œæ­¤å¤„ä¸å†å±•å¼€ã€‚ä»Šå¤©è¦è®²çš„æ˜¯ä¸ºåŸŸåç”³è¯·å…è´¹çš„ https è¯ä¹¦ï¼Œå› ä¸ºè¿™ä¸ªåŸŸåä¹‹å‰æ˜¯ä¸ºäº†ç»™å°ç¨‹åºå†™æ¥å£ç”³è¯·çš„ï¼Œå°ç¨‹åºå¿…é¡»ä½¿ç”¨åŸŸåå¹¶ä¸”è¦å¤‡æ¡ˆï¼Œä½¿ç”¨ https è®¿é—®ã€‚</p><p>æˆ‘æ˜¯åœ¨<a href="https://freessl.cn/" target="_blank" rel="noopener">freessl</a>ç”³è¯·çš„åŸŸåï¼Œå¹¶ä¸”ç”³è¯·çš„æ˜¯<strong>å¤šåŸŸåé€šé…ç¬¦</strong>ç±»å‹çš„è¯ä¹¦ï¼Œè¿™æ ·æˆ‘å°±ä¸ç”¨ç»™æ¯ä¸ªäºŒçº§åŸŸåéƒ½ç”³è¯·ä¸€ä¸ªè¯ä¹¦ã€‚ä¸è¿‡è¿™ç§è¯ä¹¦æœ‰æ•ˆæœŸæ¯”è¾ƒçŸ­ï¼Œåªæœ‰ä¸‰ä¸ªæœˆï¼Œè¿‡æœŸåæ€ä¹ˆå¤„ç†ç›®å‰æˆ‘è¿˜ä¸ç¡®å®šï¼Œåªèƒ½åˆ°æ—¶å€™å†çœ‹ã€‚</p><p>è¿›å…¥ç½‘ç«™åå…ˆç™»å½•ï¼Œç„¶ååœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥åŸŸåï¼Œæˆ‘éœ€è¦å¤šåŸŸåæ‰€ä»¥æˆ‘æ˜¯è¿™æ ·å†™çš„ï¼ˆæ‹¿ç™¾åº¦ä¸¾ä¾‹ï¼‰ï¼š*.baidu.com,baidu.com</p><p><img src="https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-12-15-131207.png" alt></p><p>ç„¶åç½‘ç«™ä¼šè®©ä½ ä¸‹è½½ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œå« keyManagerã€‚è®¾ç½®å¥½å¼€å¯å¯†ç åï¼Œä¼šå…ˆè®©ä½ æˆæƒåŸŸåè¿è¥å•†ï¼Œæˆ‘ç”¨çš„é˜¿é‡Œäº‘ï¼Œå®ƒæœ¬èº«å°±æ”¯æŒï¼Œæ‰€ä»¥æˆ‘å¡«å…¥ä¸¤ä¸ª key åé©¬ä¸Šå°±æˆæƒæˆåŠŸäº†ï¼Œåé¢å°±æ˜¯ç”³è¯·ï¼Œè¿‡ç¨‹å¾ˆç®€å•ï¼Œå®Œæˆåéœ€è¦ä½ å»åŸŸåè§£æé‚£æ·»åŠ ä¸€ä¸ª TXT ç±»å‹çš„è§£æï¼Œè§£æå†…å®¹è½¯ä»¶ä¼šæä¾›ã€‚</p><p>è§£æå®Œäº†ä¹‹åï¼Œå¯¼å‡ºè¯ä¹¦ï¼Œæˆ‘ç”¨çš„ Nginx é‚£æˆ‘å°±é€‰æ‹© Nginxã€‚ä¸‹è½½åæ˜¯ä¸€ä¸ªå‹ç¼©åŒ…ï¼Œè§£å‹åå¾—åˆ°ä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ªæ‰©å±•åä¸º<code>.crt</code>ï¼Œå¦ä¸€ä¸ªä¸º<code>.key</code>ã€‚è¿™ä¸¤ä¸ªæ–‡ä»¶åˆ°æ—¶å€™éœ€è¦ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸­ï¼ŒNginxé…ç½®ä¸­éœ€è¦ç”¨åˆ°ã€‚</p><p>Nginx çš„é…ç½®æ–‡ä»¶å¤§è‡´å¦‚ä¸‹ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// xxxx.conf</span><br><span class="line">// é‡å®šå‘ï¼Œhttp é‡å®šå‘ä¸º https</span><br><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name åŸŸå;</span><br><span class="line">    return 301 https://$server_name$request_uri;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">    listen 443 ssl;</span><br><span class="line">    server_name åŸŸå;</span><br><span class="line">    ssl_certificate /path/æ–‡ä»¶å.crt; //å­˜æ”¾æ–‡ä»¶çš„è·¯å¾„</span><br><span class="line">    ssl_certificate_key /path/æ–‡ä»¶å.key; //å­˜æ”¾æ–‡ä»¶çš„è·¯å¾„</span><br><span class="line">    root /home/ubuntu/www/animal-crossing-home; //é¡¹ç›®æ ¹ç›®å½•</span><br><span class="line">    index index.html; // é»˜è®¤æ–‡ä»¶å</span><br><span class="line">    location / &#123;</span><br><span class="line">      proxy_pass http://127.0.0.1:5000; //æœ¬åœ°æœåŠ¡åœ°å€åŠ ç«¯å£</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åé‡å¯Nginxï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nginx -s reload</span><br></pre></td></tr></table></figure><p>è¿™æ—¶ï¼Œä½ è®¿é—® http çš„åŸŸåï¼Œå°±ä¼šè¢«é‡å®šå‘åˆ° httpsï¼Œchrome åœ°å€å‰ä¸å‡ºæ„å¤–çš„è¯ï¼Œä¹Ÿåº”è¯¥ä¼šæ˜¾ç¤ºä¸€æŠŠå°é”ã€‚</p><p>åŸŸåä¸‰ä¸ªæœˆåè¿‡æœŸå¦‚ä½•å¤„ç†æˆ‘åˆ°æ—¶å€™ä¼šå†å†™ä¸€ç¯‡åšå®¢è¿›è¡Œè¯´æ˜ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ä»Šå¤©äº”å…­æœˆä»½ä¸Šä¸ªæœåŠ¡å™¨åˆ°æœŸåï¼Œä¸€ç›´æ²¡æœ‰å¼€å§‹æŠ˜è…¾æ–°çš„æœåŠ¡å™¨ï¼Œåªæ˜¯å®‰è£…äº†ä¸€ä¸‹ç¯å¢ƒï¼šnodeï¼ŒNginxï¼ŒMysqlä¹‹ç±»ï¼Œå¾ˆå¤šæœåŠ¡éƒ½æ²¡æœ‰è·‘èµ·æ¥ï¼Œä»Šå¤©ç»ˆäºæ‰“ç®—æŠŠå®ƒé‡æ–°æ¡èµ·æ¥ï¼Œç›®å‰æœåŠ¡éƒ½åŸºæœ¬å·²ç»æ¢å¤ï¼Œè¿›è¡Œå¾—è¿˜ç®—é¡ºåˆ©ï¼Œè¶çƒ­æ‰“é“ï¼ŒæŠŠè’¸è…¾çš„ä¸€äº›ç»è¿‡è®°å½•ä¸€ä¸‹ï¼Œå…¶å®ä¸Šæ¬¡æŠ˜è…¾çš„æ—¶å€™æˆ‘å°±æ‰“ç®—è®°å½•ï¼Œ
      
    
    </summary>
    
    
      <category term="æŠ˜è…¾" scheme="https://github.com/Tit1e/tags/%E6%8A%98%E8%85%BE/"/>
    
  </entry>
  
  <entry>
    <title>flex-grow å±æ€§æ— æ•ˆï¼Œå®½åº¦è¢«æ’‘å¼€é—®é¢˜è§£å†³æ–¹æ³•</title>
    <link href="https://github.com/Tit1e/2020/11/29/136-flex-grow-invalid/"/>
    <id>https://github.com/Tit1e/2020/11/29/136-flex-grow-invalid/</id>
    <published>2020-11-29T12:02:18.000Z</published>
    <updated>2020-11-29T12:25:17.916Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ä½¿ç”¨ flex å¸ƒå±€çš„æ—¶å€™ï¼Œæœ‰æ—¶ä¼šé‡åˆ° flex-grow å±æ€§æ— æ•ˆçš„æƒ…å†µï¼ŒæœŸæœ›æ˜¯ä¸¤ä¸ªå­å…ƒç´ å®½åº¦å¹³å‡åˆ†ï¼Œä½†æ˜¯å®é™…æƒ…å†µå°±æ˜¯æ— æ³•å¹³å‡åˆ†å¸ƒï¼Œè®¾ç½® <code>flex-shrink: 0;</code> ä¹Ÿæ— æ•ˆï¼Œæˆ‘ç”¨æ–‡å­—è¶…å‡ºä¸æ¢è¡Œæ¥å¤ç°è¿™ç§æƒ…å†µã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#flex-box</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#flex-box</span> <span class="selector-tag">div</span>&#123;</span><br><span class="line">  <span class="attribute">flex-grow</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#flex-box</span> <span class="selector-tag">div</span> <span class="selector-tag">p</span>&#123;</span><br><span class="line">  <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"flex-box"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¶…å‡ºä¸æ¢è¡Œ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¶…å‡ºä¸æ¢è¡Œï¼Œè¶…å‡ºä¸æ¢è¡Œï¼Œè¶…å‡ºä¸æ¢è¡Œï¼Œè¶…å‡ºä¸æ¢è¡Œï¼Œè¶…å‡ºä¸æ¢è¡Œï¼Œè¶…å‡ºä¸æ¢è¡Œï¼Œè¶…å‡ºä¸æ¢è¡Œ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç æ¸²æŸ“å‡ºçš„ dom æ˜¯è¿™ä¸ªæ ·å­çš„ï¼š</p><p><img src="https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-11-29-120940.png" alt></p><p>æ˜æ˜å¯¹ div å…ƒç´ è®¾ç½®äº† <code>flex-grow: 1;</code> å±æ€§ï¼Œä½†æ˜¯ï¼Œå®é™…ä¸Šä¸¤ä¸ª div çš„å®½åº¦å¹¶æ²¡æœ‰è¢«å¹³å‡åˆ†ã€‚</p><p>è§£å†³åŠæ³•å¾ˆç®€å•ï¼Œåªè¦æŠŠ div çš„ width å±æ€§è®¾ç½®ä¸º 0pxï¼Œè¿™æ · div çš„å®½åº¦å°±æ˜¯ç”± <code>flex-grow: 1;</code> æ¥å†³å®šçš„äº†ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#flex-box</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#flex-box</span> <span class="selector-tag">div</span>&#123;</span><br><span class="line">  <span class="comment">/* åŠ ä¸Šè¿™ä¸€è¡Œ css */</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">flex-grow</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#flex-box</span> <span class="selector-tag">div</span> <span class="selector-tag">p</span>&#123;</span><br><span class="line">  <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŠŠå®½åº¦è®¾ç½®ä¸º 0 åï¼Œæµè§ˆå™¨ä¸­æ¸²æŸ“å‡ºçš„æ•ˆæœå°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœäº†ã€‚</p><p><img src="https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-11-29-121707.png" alt></p><p>åŒç†ï¼Œå¦‚æœè®¾ç½®äº† <code>flex-direction: column;</code> ï¼Œé‚£å°±éœ€è¦æŠŠ height å±æ€§è®¾ç½®ä¸º0pxã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;åœ¨ä½¿ç”¨ flex å¸ƒå±€çš„æ—¶å€™ï¼Œæœ‰æ—¶ä¼šé‡åˆ° flex-grow å±æ€§æ— æ•ˆçš„æƒ…å†µï¼ŒæœŸæœ›æ˜¯ä¸¤ä¸ªå­å…ƒç´ å®½åº¦å¹³å‡åˆ†ï¼Œä½†æ˜¯å®é™…æƒ…å†µå°±æ˜¯æ— æ³•å¹³å‡åˆ†å¸ƒï¼Œè®¾ç½® &lt;code&gt;flex-shrink: 0;&lt;/code&gt; ä¹Ÿæ— æ•ˆï¼Œæˆ‘ç”¨æ–‡å­—è¶…å‡ºä¸æ¢è¡Œæ¥å¤ç°è¿™ç§æƒ…å†µã€‚&lt;/p&gt;
&lt;figure cla
      
    
    </summary>
    
    
      <category term="å­¦ä¹ " scheme="https://github.com/Tit1e/tags/%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>Vue æŠ¥ Failed to mount component é”™è¯¯</title>
    <link href="https://github.com/Tit1e/2020/09/28/135-Failed-to-mount-component/"/>
    <id>https://github.com/Tit1e/2020/09/28/135-Failed-to-mount-component/</id>
    <published>2020-09-28T14:00:34.000Z</published>
    <updated>2020-09-28T14:17:14.139Z</updated>
    
    <content type="html"><![CDATA[<p>å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°äº†ä¸ªå¥‡æ€ªçš„æŠ¥é”™</p><blockquote><p>Failed to mount component: template or render function not defined.</p></blockquote><p>çœ‹å†…å®¹åº”è¯¥æ˜¯æ¨¡æ¿å¼•ç”¨å‡ºäº†é—®é¢˜ï¼Œä½†æ˜¯è¿™ä¸ªæŠ¥é”™ä¸ä¼šæ˜¾ç¤ºå…·ä½“æ˜¯å“ªè¡ŒæŠ¥é”™äº†ã€‚æˆ‘ debug äº†å¥½ä¹…æœ€ç»ˆæ‰å‘ç°é—®é¢˜ã€‚</p><p>åœ¨ç”¨ vue-cli å¼€å‘é¡¹ç›®æ—¶ï¼Œæˆ‘ä¼šå›¾çœäº‹åœ¨å¼•ç”¨ç»„ä»¶æ—¶ç»å¸¸çœç•¥<code>index.vue</code>ï¼Œæ¯”å¦‚æ­£å¸¸çš„è·¯å¾„æ˜¯ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@/<span class="keyword">views</span>/<span class="keyword">home</span>/<span class="keyword">index</span>.<span class="keyword">vue</span></span><br></pre></td></tr></table></figure><p>è€Œæˆ‘ç»å¸¸å†™æˆ</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@/<span class="keyword">views</span>/<span class="keyword">home</span></span><br></pre></td></tr></table></figure><p>æ­£å¸¸æƒ…å†µä¸‹è¿™æ ·å†™å¹¶æ²¡æœ‰é—®é¢˜ï¼Œæœ¬æ¥ä¹Ÿæ”¯æŒè¿™ç§å†™æ³•ï¼Œ</p><p>å½“æ—¶å½“ä½ çš„ home ç›®å½•ä¸‹å­˜åœ¨<code>index.js</code>æ—¶ï¼Œå®ƒé»˜è®¤å¼•ç”¨çš„æ˜¯ js æ–‡ä»¶è€Œä¸æ˜¯.vueæ–‡ä»¶ï¼Œå› æ­¤å°±ä¼šäº§ç”Ÿä¸Šé¢çš„æŠ¥é”™ï¼Œè§£å†³æ–¹æ³•å°±æ˜¯å†™ä¸Šå®Œæ•´çš„æ–‡ä»¶è·¯å¾„ã€‚</p><p>è¿™å…¶å®å°±æ˜¯ä¸ªå¾ˆç®€å•çš„é—®é¢˜ï¼Œå°±æ˜¯ debug æ¯”è¾ƒéš¾ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°äº†ä¸ªå¥‡æ€ªçš„æŠ¥é”™&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Failed to mount component: template or render function not defined.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;çœ‹å†…å®¹åº”è¯¥æ˜¯æ¨¡æ¿å¼•ç”¨å‡ºäº†é—®
      
    
    </summary>
    
    
      <category term="å­¦ä¹ " scheme="https://github.com/Tit1e/tags/%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="vue" scheme="https://github.com/Tit1e/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>webpack æŠ¥é”™ errorï¼šSupport for the experimental syntax &#39;classProperties&#39; isn&#39;t currently enable</title>
    <link href="https://github.com/Tit1e/2020/09/01/134-webpack-experimental-syntax/"/>
    <id>https://github.com/Tit1e/2020/09/01/134-webpack-experimental-syntax/</id>
    <published>2020-09-01T01:29:52.000Z</published>
    <updated>2020-11-03T15:05:19.056Z</updated>
    
    <content type="html"><![CDATA[<p>å‰é˜µå­å°è£…å®Œæ³¢å½¢æ’ä»¶åœ¨ç”¨ webpack æ‰“åŒ…çš„æ—¶å€™ï¼Œå‡ºç°äº†å¼‚å¸¸ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">errorï¼šSupport <span class="keyword">for</span> the experimental syntax <span class="string">'classProperties'</span> isn<span class="string">'t currently enable</span></span><br></pre></td></tr></table></figure><p>ä»è¿™ä¸ªæŠ¥é”™ä¸­å¯ä»¥çŸ¥é“å‡ºç°è¿™ä¸ªå¼‚å¸¸çš„åŸå› æ˜¯æˆ‘å°è£…çš„ç±»ä¸­ç”¨äº† Class çš„å®éªŒæ€§è¯­æ³•ï¼Œè™½ç„¶æˆ‘å·²ç»è£…äº† Babelï¼Œä½†æˆ‘å®‰è£…çš„ Babel å¹¶ä¸æ”¯æŒè¯•éªŒæ€§è¯­æ³•çš„è½¬è¯‘ï¼Œæ‰€ä»¥éœ€è¦å•ç‹¬å®‰è£…è½¬è¯‘è¯•éªŒæ€§è¯­æ³•çš„æ’ä»¶ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D @babel/plugin-proposal-class-properties</span><br></pre></td></tr></table></figure><p>å¦å¤–è¿˜éœ€è¦åœ¨ .babelrc ä¸­é…ç½®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"plugins"</span>: [</span><br><span class="line">    [<span class="string">"@babel/plugin-proposal-class-properties"</span>]</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¹‹åå†è¿›è¡Œç¼–è¯‘å°±ä¸ä¼šå‡ºç°ä¸Šé¢çš„æŠ¥é”™ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;å‰é˜µå­å°è£…å®Œæ³¢å½¢æ’ä»¶åœ¨ç”¨ webpack æ‰“åŒ…çš„æ—¶å€™ï¼Œå‡ºç°äº†å¼‚å¸¸ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/
      
    
    </summary>
    
    
      <category term="å­¦ä¹ " scheme="https://github.com/Tit1e/tags/%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="webpack" scheme="https://github.com/Tit1e/tags/webpack/"/>
    
  </entry>
  
  <entry>
    <title>el-tree æ›´æ–°èŠ‚ç‚¹ä¿¡æ¯</title>
    <link href="https://github.com/Tit1e/2020/08/06/133-el-tree-update-node/"/>
    <id>https://github.com/Tit1e/2020/08/06/133-el-tree-update-node/</id>
    <published>2020-08-06T14:23:07.000Z</published>
    <updated>2020-08-06T14:56:46.552Z</updated>
    
    <content type="html"><![CDATA[<p>å…¬å¸ç»„ç»‡æœºæ„ç®¡ç†ä¸­éœ€è¦ç”¨åˆ° <code>element-u</code> çš„ <code>el-tree</code> ç»„ä»¶ï¼Œä¼šå¯¹å…¬å¸çš„ç»“æ„è¿›è¡Œæ·»åŠ æˆ–åˆ é™¤ï¼Œ<code>el-tree</code> èŠ‚ç‚¹çš„åŠ è½½æ–¹å¼æœ‰ä¸¤ç§ï¼šä¸€ç§æ˜¯ç›´æ¥ä¼ å…¥æ‰€æœ‰çš„èŠ‚ç‚¹ä¿¡æ¯ï¼Œå½“ç„¶å‰ææ˜¯å…ˆæ•´ç†å¥½ä¸Šä¸‹çº§å…³ç³»ï¼›å¦ä¸€ç§å°±æ˜¯å¼‚æ­¥åŠ¨æ€åŠ è½½èŠ‚ç‚¹ã€‚</p><p>å¦‚æœé‡‡ç”¨ç¬¬ä¸€ç§æ–¹å¼å› ä¸ºæ‰€æœ‰æ•°æ®éƒ½å·²ç»è¢«åŠ è½½ï¼Œæ‰€ä»¥æ–°å¢ã€ç¼–è¾‘ã€åˆ é™¤èŠ‚ç‚¹åéƒ½å¯ä»¥åœ¨æºæ•°æ®ä¸Šè¿›è¡Œæ›´æ”¹æ“ä½œã€‚è€Œç”¨å¼‚æ­¥åŠ è½½çš„æ–¹å¼ï¼Œæ–°å¢ï¼Œå¯ä»¥åœ¨æ–°å¢æˆåŠŸåè®©åç«¯è¿”å›æ–°å¢èŠ‚ç‚¹çš„ idï¼Œç„¶åé€šè¿‡ç»„ä»¶æä¾›çš„ <code>append</code> ã€<code>insertBefore</code> æˆ– <code>insertAfter</code> ç›´æ¥è¿½åŠ èŠ‚ç‚¹ï¼Œåˆ é™¤å¯ä»¥é€šè¿‡ <code>remove</code> ç›´æ¥ç§»é™¤ï¼Œä½†æ˜¯å¦‚æœæ˜¯ç¼–è¾‘çš„è¯ï¼Œéœ€è¦æ›´æ–°èŠ‚ç‚¹ä¿¡æ¯ï¼Œè€Œç»„ä»¶å¹¶æ²¡æœ‰æä¾›è¿™æ ·çš„æ–¹æ³•ï¼Œå¦‚æœé‡æ–°åŠ è½½æ•´ä¸ªæ ‘ï¼Œé‚£æ ‘åˆè¦ä»ç¬¬ä¸€çº§é‡æ–°å±•å¼€ã€‚æœ€åæˆ‘æƒ³åˆ°çš„æ–¹æ³•æ˜¯æ¨¡æ‹Ÿçˆ¶èŠ‚ç‚¹é‡æ–°åŠ è½½ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">refreshNode(id) &#123;</span><br><span class="line">  <span class="comment">// å…ˆæ ¹æ®èŠ‚ç‚¹ id è·å–åˆ°èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">  <span class="keyword">const</span> node = <span class="keyword">this</span>.$refs.elTree.getNode(id)</span><br><span class="line">  <span class="comment">// å°†çˆ¶èŠ‚ç‚¹çš„ loaded è®¾ç½®ä¸º false, è¿™æ ·åœ¨å±•å¼€çˆ¶èŠ‚ç‚¹çš„æ—¶å€™ï¼Œå°±ä¼šé‡æ–°è¯·æ±‚å­èŠ‚ç‚¹</span></span><br><span class="line">  node.parent.loaded = <span class="literal">false</span></span><br><span class="line">  <span class="comment">// å±•å¼€çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">  node.parent.expand()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±å®Œæˆäº†èŠ‚ç‚¹çš„æ›´æ–°ï¼Œä¹Ÿä¸ç”¨é‡è½½æ•´ä¸ªæ ‘ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;å…¬å¸ç»„ç»‡æœºæ„ç®¡ç†ä¸­éœ€è¦ç”¨åˆ° &lt;code&gt;element-u&lt;/code&gt; çš„ &lt;code&gt;el-tree&lt;/code&gt; ç»„ä»¶ï¼Œä¼šå¯¹å…¬å¸çš„ç»“æ„è¿›è¡Œæ·»åŠ æˆ–åˆ é™¤ï¼Œ&lt;code&gt;el-tree&lt;/code&gt; èŠ‚ç‚¹çš„åŠ è½½æ–¹å¼æœ‰ä¸¤ç§ï¼šä¸€ç§æ˜¯ç›´æ¥ä¼ å…¥æ‰€æœ‰çš„èŠ‚ç‚¹ä¿¡æ¯ï¼Œå½“ç„¶å‰ææ˜¯å…ˆæ•´ç†å¥½ä¸Šä¸‹çº§
      
    
    </summary>
    
    
      <category term="vue" scheme="https://github.com/Tit1e/tags/vue/"/>
    
      <category term="element-ui" scheme="https://github.com/Tit1e/tags/element-ui/"/>
    
  </entry>
  
  <entry>
    <title>vue ç›‘å¬å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</title>
    <link href="https://github.com/Tit1e/2020/06/09/132-vue-listen-child-component/"/>
    <id>https://github.com/Tit1e/2020/06/09/132-vue-listen-child-component/</id>
    <published>2020-06-09T13:42:13.000Z</published>
    <updated>2020-06-09T13:58:48.043Z</updated>
    
    <content type="html"><![CDATA[<p>å‰é˜µå­åšä¸šåŠ¡çš„æ—¶å€™é‡åˆ°ä¸€ä¸ªéœ€æ±‚ï¼Œéœ€è¦åœ¨ç”¨æˆ·è¿›å…¥ç³»ç»Ÿæ—¶åŠ ä¸€ä¸ªå…¨å±€çš„ loading é®ç½©å±‚ï¼Œåœ¨é¡µé¢æ¸²æŸ“å®Œæˆåå…³é—­é®ç½©ï¼Œåœ¨æ­£å¸¸çš„ç”¨æˆ·ç™»å½•ï¼Œè¿›å…¥ç³»ç»Ÿè¿™ä¸ªæµç¨‹ä¸‹ï¼Œå®ç°è¿™ä¸ªå¹¶æ²¡æœ‰éš¾åº¦ï¼š</p><p>è¿›å…¥ç™»å½•é¡µ-ç”¨æˆ·ç™»å½•-æ˜¾ç¤º loading - è¿›å…¥é¦–é¡µ - åœ¨é¦–é¡µçš„ mounted é’©å­ä¸­å…³é—­ loading</p><p>ä½†ä¸»è¦æ˜¯ç”¨æˆ·ä¸æŒ‰è¿™å¥—æ¥ï¼Œç”¨æˆ·ç›´æ¥åœ¨ä¸€ä¸ªå…¶ä»–é¡µé¢åˆ·æ–°çš„æ—¶å€™ï¼Œè¿™å¥—å°±ä¸é€‚ç”¨äº†ï¼Œé™¤éä½ å»æ¯ä¸ªé¡µé¢çš„ mounted é’©å­ä¸­éƒ½å†™ä¸€ä¸ªå…³é—­loading çš„æ–¹æ³•ï¼Œä½†è¿™æ ·åšæ˜æ˜¾ä¸ç°å®ï¼Œé¡µé¢å°‘è¿˜å¥½è¯´ï¼Œä½†æˆ‘ä»¬çš„ç³»ç»Ÿå·²ç»æœ‰å‡ åä¸ªé¡µé¢ï¼Œæ¯ä¸ªéƒ½åŠ ä¸€éï¼Œå®åœ¨è¿‡äºéº»çƒ¦ã€‚</p><p>åæ¥æˆ‘ Google äº†ä¸€ç•ªï¼ŒæŸ¥åˆ°äº† <code>@hook:mounted</code> è¿™ä¸ªäº‹ä»¶å¯ä»¥ç›‘å¬å­ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼Œè¿™æ ·æˆ‘æŠŠå®ƒåŠ  <code>&lt;router-view /&gt;</code> ä¸Šï¼Œå°±å®ç°äº†ç›‘å¬æ¯ä¸ªé¡µé¢çš„ mounted ç”Ÿå‘½å‘¨æœŸï¼Œç„¶ååœ¨å›è°ƒä¸­å†™å…¥å…³é—­ loading çš„æ–¹æ³•ï¼Œå°±å®ç°äº†æ•ˆæœã€‚</p><p><a href="https://www.cnblogs.com/mengfangui/p/12546866.html" target="_blank" rel="noopener">å‚è€ƒé“¾æ¥</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;å‰é˜µå­åšä¸šåŠ¡çš„æ—¶å€™é‡åˆ°ä¸€ä¸ªéœ€æ±‚ï¼Œéœ€è¦åœ¨ç”¨æˆ·è¿›å…¥ç³»ç»Ÿæ—¶åŠ ä¸€ä¸ªå…¨å±€çš„ loading é®ç½©å±‚ï¼Œåœ¨é¡µé¢æ¸²æŸ“å®Œæˆåå…³é—­é®ç½©ï¼Œåœ¨æ­£å¸¸çš„ç”¨æˆ·ç™»å½•ï¼Œè¿›å…¥ç³»ç»Ÿè¿™ä¸ªæµç¨‹ä¸‹ï¼Œå®ç°è¿™ä¸ªå¹¶æ²¡æœ‰éš¾åº¦ï¼š&lt;/p&gt;
&lt;p&gt;è¿›å…¥ç™»å½•é¡µ-ç”¨æˆ·ç™»å½•-æ˜¾ç¤º loading - è¿›å…¥é¦–é¡µ - åœ¨é¦–é¡µçš„ mounte
      
    
    </summary>
    
    
      <category term="vue" scheme="https://github.com/Tit1e/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>æ‰¹é‡åˆ é™¤å¾®åšï¼Œå¯è‡ªå®šä¹‰åˆ é™¤å†…å®¹</title>
    <link href="https://github.com/Tit1e/2020/05/23/131-delete-weibo/"/>
    <id>https://github.com/Tit1e/2020/05/23/131-delete-weibo/</id>
    <published>2020-05-23T07:36:40.000Z</published>
    <updated>2020-05-23T08:33:51.718Z</updated>
    
    <content type="html"><![CDATA[<p>é¦–å…ˆæµè§ˆå™¨ä¸Šç™»å½•å¾®åšï¼Œæµè§ˆå™¨è¦æ±‚ï¼š QQæµè§ˆå™¨ï¼Œ360æé€Ÿæµè§ˆå™¨ï¼Œè°·æ­Œæµè§ˆå™¨ï¼Œç«ç‹æµè§ˆå™¨ç­‰éƒ½è¡Œï¼Œå¯ä»¥å…ˆè¯•è¯•ï¼Œä¸è¡Œå†æ¢ã€‚Safariæˆ‘è®°å¾—é»˜è®¤æ˜¯å…³é—­è°ƒè¯•æ¨¡å¼çš„ï¼Œ</p><p>Windows ç”¨æˆ·ç›´æ¥æŒ‰ F12 æ‰“å¼€æ§åˆ¶å°ï¼Œæˆ–è€…åœ¨ç½‘é¡µä¸Šå³é”®ï¼Œä¼šæœ‰ã€å…ƒç´ å®¡æŸ¥ã€‘ã€ã€æ£€æŸ¥ã€‘ç±»ä¼¼è¿™ç§çš„èœå•é¡¹ï¼Œæ‰“å¼€å®ƒï¼Œæ­£å¸¸æƒ…å†µæµè§ˆå™¨å†…ä¼šå‡ºç°ä¸€ä¸ªçª—å£ã€‚</p><p>ç„¶åç‚¹å‡»ã€consoleã€‘æ ‡ç­¾é¡µï¼Œå¤åˆ¶ä»£ç ï¼Œåœ¨ç®­å¤´åœ¨çš„ä½ç½®ç²˜è´´ä»£ç ï¼Œå¦‚æœä½ è¦æŒ‰æ¡ä»¶åˆ é™¤ï¼Œé‚£å°±å…ˆç¼–è¾‘å¥½æ¡ä»¶ï¼Œç„¶åæŒ‰å›è½¦ã€‚</p><p><img src="https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-05-23-082341.png" alt></p><p>æ ¹æ®å®é™…ä½¿ç”¨æ¥è¯´ï¼Œåˆ é™¤è¦ç­‰ä¸ªåæ¥ç§’æ‰ä¼šæ‰§è¡Œï¼Œå½“é¡µé¢åœ¨é—ªçš„æ—¶å€™è¯´æ˜åœ¨åˆ é™¤äº†ã€‚</p><p>ä½¿ç”¨çš„æ—¶å€™è‡ªåŠ¨è·³åˆ°ä¸‹ä¸€é¡µå¥½åƒæœ‰ç‚¹é—®é¢˜ã€‚å¦‚æœé¡µé¢é•¿æ—¶é—´æ²¡ååº”ï¼Œé‚£å°±åˆ·æ–°ä¸€ä¸‹é¡µé¢ï¼Œå†ç²˜è´´æ‰§è¡Œä¸€éä»£ç ã€‚</p><p>è¿™æ˜¯æŒ‰æ¡ä»¶åˆ é™¤å¾®åšçš„ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"><span class="keyword">var</span> s = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>)</span><br><span class="line">s.setAttribute(</span><br><span class="line">  <span class="string">'src'</span>,</span><br><span class="line">  <span class="string">'https://lib.sinaapp.com/js/jquery/2.0.3/jquery-2.0.3.min.js'</span></span><br><span class="line">)</span><br><span class="line">s.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> index = <span class="number">0</span></span><br><span class="line">  setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!$(<span class="string">'div[action-type="feed_list_item"]'</span>).length) &#123;</span><br><span class="line">      <span class="comment">// åˆ å®Œç¬¦åˆæ¡ä»¶çš„å¾®åšï¼Œç¿»åˆ°ä¸‹ä¸€é¡µ</span></span><br><span class="line">      $(<span class="string">'a.next'</span>).click()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> firstItem = $(<span class="string">'div[action-type="feed_list_item"]'</span>)[index]</span><br><span class="line">      <span class="keyword">const</span> text = $(firstItem).find(<span class="string">'.WB_feed_detail .WB_detail div[node-type="feed_list_content"]'</span>).text()</span><br><span class="line">      <span class="comment">// åˆ é™¤å¾®åšæ­£æ–‡ä¸­å«æœ‰ â€œä»Šå¤©â€ ä¸¤ä¸ªå­—çš„å¾®åš</span></span><br><span class="line">      <span class="keyword">const</span> needDelete = text.indexOf(<span class="string">'ä»Šå¤©'</span>) &gt; <span class="number">0</span></span><br><span class="line">      <span class="comment">// å¦‚æœè¦åŒ¹é…å¤šä¸ªï¼š</span></span><br><span class="line">      <span class="comment">// ä¸‹é¢è¿™æ ·å†™ä¼šæŠŠå¾®åšæ­£æ–‡ä¸­å«æœ‰ â€œä»Šå¤©â€ æˆ–è€… â€œç¬¬ä¸€â€ çš„å¾®åšåˆ é™¤ï¼Œå«æœ‰å…¶ä¸­ä¹‹ä¸€å°±ä¼šè¢«åˆ </span></span><br><span class="line">      <span class="comment">// const needDelete = text.indexOf('ä»Šå¤©') &gt; 0 || text.indexOf('ç¬¬ä¸€') &gt; 0</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// è¿™æ ·å†™æ˜¯å°†å¾®åšæ­£æ–‡ä¸­å«æœ‰ â€œä»Šå¤©â€ å’Œ â€œç¬¬ä¸€â€ çš„å¾®åšåˆ é™¤ï¼Œå¿…é¡»ä¸¤ä¸ªéƒ½åŒ…å«æ‰ä¼šè¢«åˆ </span></span><br><span class="line">      <span class="comment">// const needDelete = text.indexOf('ä»Šå¤©') &gt; 0 &amp;&amp; text.indexOf('ç¬¬ä¸€') &gt; 0</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span>(needDelete)&#123;</span><br><span class="line">        $(firstItem).find(<span class="string">'a[action-type="feed_list_delete"]'</span>)[<span class="number">0</span>].click()</span><br><span class="line">        $(firstItem).find(<span class="string">'a[action-type="ok"]'</span>)[<span class="number">0</span>].click()</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        index += <span class="number">1</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ»šåŠ¨åˆ°åº•éƒ¨è‡ªåŠ¨åŠ è½½</span></span><br><span class="line">    $(<span class="string">'html, body'</span>).animate(&#123; <span class="attr">scrollTop</span>: $(<span class="built_in">document</span>).height() &#125;, <span class="string">'slow'</span>)</span><br><span class="line">  &#125;, <span class="number">800</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">document</span>.head.appendChild(s)</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯åˆ é™¤æ‰€æœ‰å¾®åšçš„ä»£ç ï¼š<a href="https://greasyfork.org/en/scripts/14709-weibored-js/code" target="_blank" rel="noopener">æ¥æº</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>);</span><br><span class="line">s.setAttribute(</span><br><span class="line">  <span class="string">'src'</span>,</span><br><span class="line">  <span class="string">'https://lib.sinaapp.com/js/jquery/2.0.3/jquery-2.0.3.min.js'</span></span><br><span class="line">);</span><br><span class="line">s.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!$(<span class="string">'a[action-type="feed_list_delete"]'</span>)) &#123;</span><br><span class="line">      $(<span class="string">'a.next'</span>).click();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      $(<span class="string">'a[action-type="feed_list_delete"]'</span>)[<span class="number">0</span>].click();</span><br><span class="line">      $(<span class="string">'a[action-type="ok"]'</span>)[<span class="number">0</span>].click();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// scroll bottom let auto load</span></span><br><span class="line">    $(<span class="string">'html, body'</span>).animate(&#123; <span class="attr">scrollTop</span>: $(<span class="built_in">document</span>).height() &#125;, <span class="string">'slow'</span>);</span><br><span class="line">  &#125;, <span class="number">800</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">document</span>.head.appendChild(s);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;é¦–å…ˆæµè§ˆå™¨ä¸Šç™»å½•å¾®åšï¼Œæµè§ˆå™¨è¦æ±‚ï¼š QQæµè§ˆå™¨ï¼Œ360æé€Ÿæµè§ˆå™¨ï¼Œè°·æ­Œæµè§ˆå™¨ï¼Œç«ç‹æµè§ˆå™¨ç­‰éƒ½è¡Œï¼Œå¯ä»¥å…ˆè¯•è¯•ï¼Œä¸è¡Œå†æ¢ã€‚Safariæˆ‘è®°å¾—é»˜è®¤æ˜¯å…³é—­è°ƒè¯•æ¨¡å¼çš„ï¼Œ&lt;/p&gt;
&lt;p&gt;Windows ç”¨æˆ·ç›´æ¥æŒ‰ F12 æ‰“å¼€æ§åˆ¶å°ï¼Œæˆ–è€…åœ¨ç½‘é¡µä¸Šå³é”®ï¼Œä¼šæœ‰ã€å…ƒç´ å®¡æŸ¥ã€‘ã€ã€æ£€æŸ¥ã€‘ç±»ä¼¼è¿™ç§
      
    
    </summary>
    
    
      <category term="æŠ˜è…¾" scheme="https://github.com/Tit1e/tags/%E6%8A%98%E8%85%BE/"/>
    
  </entry>
  
  <entry>
    <title>uni-app å°ç¨‹åºç»™æ‰€æœ‰é¡µé¢æ·»åŠ åˆ†äº«</title>
    <link href="https://github.com/Tit1e/2020/04/28/130-mini-program-share/"/>
    <id>https://github.com/Tit1e/2020/04/28/130-mini-program-share/</id>
    <published>2020-04-28T14:59:39.000Z</published>
    <updated>2020-04-28T15:21:35.304Z</updated>
    
    <content type="html"><![CDATA[<p>å°ç¨‹åºçš„è½¬å‘æŒ‰é’®é»˜è®¤æ˜¯å…³é—­çš„ï¼Œéœ€è¦äººä¸ºæ‰“å¼€ï¼Œä¸ºå°ç¨‹åºæ›´æ–¹ä¾¿åœ°ä¼ æ’­ï¼Œæ‰€ä»¥æˆ‘éœ€è¦ç»™å°ç¨‹åºåŠ ä¸Šè¿™ä¸ªåŠŸèƒ½ã€‚</p><p>æˆ‘çš„ç›®çš„åªæ˜¯æ–¹ä¾¿ä¼ æ’­å°ç¨‹åºï¼Œéœ€æ±‚è·Ÿå…¶ä»–å°ç¨‹åºç›¸æ¯”æ²¡é‚£ä¹ˆå¤æ‚ï¼Œåˆ†äº«åæˆ‘åªéœ€å›ºå®šè¿›å…¥å°ç¨‹åºé¦–é¡µã€‚</p><p>å°ç¨‹åºåœ¨ Page æ³¨å†Œå°ç¨‹åºé¡µé¢æ—¶ï¼Œæœ‰ä¸€ä¸ª <a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onShareAppMessage-Object-object" target="_blank" rel="noopener">onShareAppMessage</a> å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°éœ€è¦ <code>return</code> ä¸€ä¸ª<code>Object</code> ï¼Œè¿™ä¸ªå¯¹è±¡ä¸­æ˜¯èŠå¤©ç•Œé¢æ˜¾ç¤ºçš„å°ç¨‹åºå¡ç‰‡çš„ä¸€äº›ä¿¡æ¯ï¼Œæ ‡é¢˜ï¼Œé»˜è®¤å›¾ç‰‡ï¼Œé¡µé¢è·¯å¾„ã€‚</p><p>åŸç”Ÿå°ç¨‹åºä½¿ç”¨å°±æ˜¯è¿™æ ·ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  onShareAppMessage: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (res.from === <span class="string">'button'</span>) &#123;</span><br><span class="line">      <span class="comment">// æ¥è‡ªé¡µé¢å†…è½¬å‘æŒ‰é’®</span></span><br><span class="line">      <span class="built_in">console</span>.log(res.target)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      title: <span class="string">'è‡ªå®šä¹‰è½¬å‘æ ‡é¢˜'</span>,</span><br><span class="line">      path: <span class="string">'/page/user?id=123'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯è¿™ä¸ªå‡½æ•°éœ€è¦åœ¨æ¯ä¸ªé¡µé¢éƒ½å†™ä¸€éï¼Œå°±å¾ˆéº»çƒ¦ã€‚æˆ‘ç”¨çš„æ˜¯ uni-appï¼Œæ‰€ä»¥ mixins åˆæ´¾ä¸Šç”¨åœºäº†ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @/mixins/share.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">onShareAppMessage(res) &#123;</span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">path: <span class="string">'pages/tabBar/tools/tools'</span>,</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ <code>main.js</code> ä¸­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mixin <span class="keyword">from</span> <span class="string">'@/mixins/share.js'</span></span><br><span class="line"></span><br><span class="line">Vue.mixin(mixin)</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œå°ç¨‹åºä¸­çš„æ‰€æœ‰é¡µé¢éƒ½å¯ä»¥å‘èµ·è½¬å‘äº†ï¼Œä¸è¿‡æˆ‘è½¬å‘çš„è·¯å¾„å›ºå®šéƒ½æ˜¯å°ç¨‹åºé¦–é¡µï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/getCurrentPages.html" target="_blank" rel="noopener">getCurrentPages()</a>  æ¥è·å–å½“å‰é¡µé¢æ ˆï¼Œä»è€Œè·å–å½“å‰é¡µé¢è·¯å¾„ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°åŠ¨æ€è½¬å‘è·¯å¾„ï¼Œè½¬å‘å½“å‰é¡µé¢ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;å°ç¨‹åºçš„è½¬å‘æŒ‰é’®é»˜è®¤æ˜¯å…³é—­çš„ï¼Œéœ€è¦äººä¸ºæ‰“å¼€ï¼Œä¸ºå°ç¨‹åºæ›´æ–¹ä¾¿åœ°ä¼ æ’­ï¼Œæ‰€ä»¥æˆ‘éœ€è¦ç»™å°ç¨‹åºåŠ ä¸Šè¿™ä¸ªåŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘çš„ç›®çš„åªæ˜¯æ–¹ä¾¿ä¼ æ’­å°ç¨‹åºï¼Œéœ€æ±‚è·Ÿå…¶ä»–å°ç¨‹åºç›¸æ¯”æ²¡é‚£ä¹ˆå¤æ‚ï¼Œåˆ†äº«åæˆ‘åªéœ€å›ºå®šè¿›å…¥å°ç¨‹åºé¦–é¡µã€‚&lt;/p&gt;
&lt;p&gt;å°ç¨‹åºåœ¨ Page æ³¨å†Œå°ç¨‹åºé¡µé¢æ—¶ï¼Œæœ‰ä¸€ä¸ª &lt;a 
      
    
    </summary>
    
    
      <category term="å°ç¨‹åº" scheme="https://github.com/Tit1e/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>uni-app å°ç¨‹åºè®¾ç½®è‡ªå®šä¹‰å­—ä½“</title>
    <link href="https://github.com/Tit1e/2020/04/27/129-mini-program-font/"/>
    <id>https://github.com/Tit1e/2020/04/27/129-mini-program-font/</id>
    <published>2020-04-27T14:21:56.000Z</published>
    <updated>2020-04-28T15:21:37.954Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨å¼€å‘åŠ¨æ£®çš„ä¸€æ¬¾å°ç¨‹åºï¼Œåˆ°ç›®å‰ä¸ºæ­¢è¸©äº†ä¸å°‘å‘ï¼Œä»Šå¤©è®°å½•ä¸€ä¸‹å°ç¨‹åºå¼•å…¥è‡ªå®šä¹‰å­—ä½“çš„æ–¹å¼ã€‚åç»­ä¼šé™†ç»­æ›´æ–°å…¶ä»–è¸©å‘è®°å½•ã€‚</p><p>é¦–å…ˆï¼Œå°ç¨‹åºæ˜¯æ”¯æŒä½¿ç”¨è‡ªå®šä¹‰å­—ä½“çš„ï¼Œä½¿ç”¨ <a href="https://developers.weixin.qq.com/miniprogram/dev/api/ui/font/wx.loadFontFace.html" target="_blank" rel="noopener">wx.loadFontFace()</a> å°±å¯ä»¥å¼•å…¥å­—ä½“ï¼Œä½†æ˜¯ä½¿ç”¨è¿™ä¸ª api æœ‰ä¸€äº›é™åˆ¶ï¼š</p><p><img src="https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-04-27-143333.png" alt></p><p>éœ€è¦ç‰¹åˆ«æ³¨æ„çš„ç‚¹æœ‰ï¼š</p><p>ç¬¬ä¸€ç‚¹ï¼šå­—ä½“æ ¼å¼ï¼Œä¿é™©èµ·è§ä½¿ç”¨ ttf æ ¼å¼ï¼Œå¦‚æœä¸æ˜¯ ttf æ ¼å¼ï¼Œå¯ä»¥åœ¨ <a href="https://transfonter.org/" target="_blank" rel="noopener">https://transfonter.org/</a> åœ¨çº¿è½¬ä¸€ä¸‹ã€‚</p><p>ç¬¬äºŒç‚¹ï¼šå­—ä½“é“¾æ¥å¿…é¡»æ˜¯ <strong>https</strong>ï¼Œæ„å‘³ç€ä¸æ”¯æŒå¼•å…¥æœ¬åœ°å­—ä½“ã€‚</p><p>ç¬¬ä¸‰ç‚¹ï¼šé“¾æ¥å¿…é¡»<strong>åŒæº</strong>æˆ–è€…å¼€å¯äº† <strong>cors</strong> æ”¯æŒã€‚</p><p>å…¶ä»–å‡ ç‚¹æ³¨æ„ç‚¹å¯¹ä½¿ç”¨æœ‰å½±å“ï¼Œä½†æ²¡ä»¥ä¸Šä¸‰ç‚¹é‡è¦ã€‚</p><p>æˆ‘å°†å­—ä½“ä¸Šä¼ åˆ°äº†è…¾è®¯çš„å¯¹è±¡å­˜å‚¨ä¸Šï¼Œå› æ­¤æˆ‘è¦åœ¨å­˜å‚¨æ¡¶çš„è®¾ç½®ä¸­å¯¹ servicewechat.com å¼€å¯ cors æ”¯æŒï¼š</p><p>1ã€ç™»å½•è…¾è®¯äº‘ï¼Œè¿›å…¥å¯¹è±¡å­˜å‚¨æ§åˆ¶å°</p><p>2ã€ç‚¹å‡»<strong>ã€å­˜å‚¨æ¡¶åˆ—è¡¨ã€‘</strong>èœå•</p><p><img src="https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-04-27-144352.png" alt></p><p>3ã€ç‚¹å‡»ä¸Šä¼ äº†å­—ä½“çš„å­˜å‚¨æ¡¶ï¼Œè¿›å…¥å­˜å‚¨æ¡¶è¯¦æƒ…</p><p><img src="https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-04-27-144625.png" alt></p><p>4ã€ç‚¹å‡»å·¦ä¾§<strong>ã€åŸºç¡€é…ç½®ã€‘</strong>èœå•</p><p><img src="https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-04-27-144749.png" alt></p><p>5ã€æ‰¾åˆ°<strong>ã€è·¨åŸŸè®¿é—®CORSè®¾ç½®ã€‘</strong>å¡ç‰‡ï¼Œç‚¹å‡»æ·»åŠ è§„åˆ™ï¼Œç…§ä¸‹å›¾å¡«å†™è¡¨å•å¹¶ä¿å­˜ï¼Œè¿‡ä¸€ä¼šå„¿å°±ä¼šç”Ÿæ•ˆã€‚</p><p><img src="https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-04-27-144838.png" alt></p><p>å®˜æ–¹æ–‡æ¡£ä¸Šè¯´å¦‚æœéœ€è¦å…¨å±€æ”¯æŒå­—ä½“çš„è¯ <code>wx.loadFontFace</code> éœ€è¦åœ¨ <code>app.js</code> ä¸­è°ƒç”¨å¹¶ä¸”è®¾ç½® <code>global</code> ä¸º <code>true</code>ã€‚</p><p>å¹¶ä¸”ä½¿ç”¨ <code>global</code> å±æ€§å¯¹è°ƒè¯•åŸºç¡€åº“ç‰ˆæœ¬æœ‰è¦æ±‚ï¼Œéœ€è¦ 2.10.0 ä»¥ä¸Šï¼Œå¦åˆ™å­—ä½“åªä¼šåœ¨è°ƒç”¨è¿™ä¸ª api çš„é¡µé¢ç”Ÿæ•ˆã€‚<img src="https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-04-27-150114.png" alt></p><p>è¿˜æœ‰æ³¨æ„ä¸­æåˆ°çš„ç¬¬å››ç‚¹ä¹Ÿæ³¨æ„ä¸€ä¸‹ï¼Œå¯èƒ½ä¼šæœ‰ä¸ªæŠ¥é”™ï¼Œä½†æ˜¯å­—ä½“å®é™…å·²ç»ç”Ÿæ•ˆï¼Œè¿™ä¸ªæŠ¥é”™å¯ä»¥å¿½ç•¥ã€‚</p><p>ä½†æ˜¯æˆ‘ä½¿ç”¨çš„æ˜¯ <code>uni-app</code>ï¼Œæˆ‘å°è¯•å†™åœ¨ <code>main.js</code> å…¥å£æ–‡ä»¶ä¸­ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ç”Ÿæ•ˆï¼Œä¸è¿‡ <code>uni-app</code> æ”¯æŒ vue çš„ mixinsï¼Œåˆ›å»ºä¸€ä¸ªfont.jsï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @/mixins/font.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">onLoad() &#123;</span><br><span class="line">uni.loadFontFace(&#123;</span><br><span class="line">family: <span class="string">'DFYuanW9'</span>,</span><br><span class="line">source: <span class="string">'url("https://xxxxxxx.ttf")'</span>,</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ <code>main.js</code> ä¸­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mixin <span class="keyword">from</span> <span class="string">'@/mixins/font.js'</span></span><br><span class="line"></span><br><span class="line">Vue.mixin(mixin)</span><br></pre></td></tr></table></figure><p>å¹¶åœ¨å…¨å±€ css ä¸­ä½¿ç”¨å­—ä½“ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">page</span>&#123;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">'DFYuanW9'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·æ¯ä¸ªé¡µé¢å°±éƒ½ä¼šç”Ÿæ•ˆäº†ã€‚</p><p>ä¸‹é¢æ˜¯å­—ä½“ä½¿ç”¨æ•ˆæœï¼š</p><p>ä¸ä½¿ç”¨å­—ä½“ï¼š</p><p><img src="https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-04-27-IMG_2437.PNG" alt></p><p>ä½¿ç”¨å­—ä½“ï¼š</p><p><img src="https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-04-27-IMG_2436.PNG" alt></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æœ€è¿‘åœ¨å¼€å‘åŠ¨æ£®çš„ä¸€æ¬¾å°ç¨‹åºï¼Œåˆ°ç›®å‰ä¸ºæ­¢è¸©äº†ä¸å°‘å‘ï¼Œä»Šå¤©è®°å½•ä¸€ä¸‹å°ç¨‹åºå¼•å…¥è‡ªå®šä¹‰å­—ä½“çš„æ–¹å¼ã€‚åç»­ä¼šé™†ç»­æ›´æ–°å…¶ä»–è¸©å‘è®°å½•ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œå°ç¨‹åºæ˜¯æ”¯æŒä½¿ç”¨è‡ªå®šä¹‰å­—ä½“çš„ï¼Œä½¿ç”¨ &lt;a href=&quot;https://developers.weixin.qq.com/minipro
      
    
    </summary>
    
    
      <category term="å°ç¨‹åº" scheme="https://github.com/Tit1e/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>element-ui el-table è¡¨æ ¼é«˜åº¦è‡ªé€‚åº”é—®é¢˜è§£å†³æ–¹æ¡ˆ</title>
    <link href="https://github.com/Tit1e/2020/04/14/128-element-ui-table-auto-height/"/>
    <id>https://github.com/Tit1e/2020/04/14/128-element-ui-table-auto-height/</id>
    <published>2020-04-14T13:14:40.000Z</published>
    <updated>2020-08-27T15:14:19.171Z</updated>
    
    <content type="html"><![CDATA[<p>å·¥ä½œä¸­ç”±äºå…¬å¸ä¸šåŠ¡éœ€è¦ï¼Œè¦æ±‚ table åšåˆ°æ•´ä¸ª table å§‹ç»ˆèƒ½åœ¨é¡µé¢ä¸Šå®Œå…¨æ˜¾ç¤ºï¼Œ head å›ºå®šï¼Œbody è¶…å‡ºæ»šåŠ¨ï¼Œç”±äºå…¬å¸ä½¿ç”¨çš„æ˜¯ element-uiï¼Œel-table ç»„ä»¶æä¾›äº† height å±æ€§ï¼Œä½†æ˜¯è¿™ä¸ªå±æ€§çš„å€¼å¿…é¡»æ˜¯å…·ä½“çš„åƒç´ ï¼Œå› æ­¤ï¼Œå½“é¡µé¢çš„çª—å£å¤§å°å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæƒ³è¦è¡¨æ ¼é«˜åº¦è‡ªé€‚åº”ï¼Œä¸€èˆ¬çš„åšæ³•å°±æ˜¯ç›‘å¬çª—å£å¤§å°æ˜¯å¦æ”¹å˜ï¼Œå¦‚æœæ”¹å˜äº†å°±é‡æ–°è®¡ç®— table çš„é«˜åº¦ï¼Œç„¶åé‡æ–°è®¾ç½®ã€‚æˆ‘ä¹‹å‰çš„åšæ³•æ˜¯è¿™æ ·çš„ï¼š</p><p>æˆ‘ä»¬å…¬å¸åŸºæœ¬éƒ½æ˜¯åå°åº”ç”¨ï¼Œç»“æ„å·®ä¸å¤šå°±æ˜¯è¿™ä¸ªæ ·å­ï¼Œèœå•ä¸é¡¶æ çš„å®½åº¦ä¸é«˜åº¦æ˜¯å›ºå®šçš„ï¼Œè€Œä¸”èœå•éƒ¨åˆ†ä¸è¡¨æ ¼é«˜åº¦çš„è®¡ç®—å…¶å®æ²¡æœ‰å…³ç³»ã€‚</p><p><img src="https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-04-14-134209.png" alt></p><p>å› æ­¤æˆ‘è®¡ç®—è¡¨æ ¼é«˜åº¦çš„æ—¶å€™ï¼Œä¸€èˆ¬éƒ½æ˜¯ï¼š</p><p>æ•´ä¸ªç½‘é¡µçš„é«˜åº¦ - é¡¶æ çš„é«˜åº¦ - å„ç§ marginï¼Œpadding çš„é«˜åº¦ = è¡¨æ ¼é«˜åº¦</p><p>ç„¶åç›‘å¬çª—å£çš„å˜åŒ–ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'resize'</span>, () =&gt; &#123;</span><br><span class="line"><span class="comment">//é‡æ–°è®¡ç®—é«˜åº¦</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ç›´åˆ°åæ¥æˆ‘é‡åˆ°äº†è¿™ä¸ªéœ€æ±‚ï¼š</p><p>é¡µé¢åˆ†ä¸ºå·¦å³ä¸¤éƒ¨åˆ†ï¼Œå¯æ‹–åŠ¨æ”¹å˜å·¦ä¾§éƒ¨åˆ†çš„å®½åº¦ï¼Œå³ä¾§è¿˜æ˜¯è‡ªé€‚åº”ã€‚ä¹ä¸€çœ‹è¿™ä¸ªå·¦ä¾§æ”¹å˜å®½åº¦è·Ÿå³ä¾§å¥½åƒæ²¡ä»€ä¹ˆå…³ç³»ï¼ŒåŸæ¥é‚£å¥—ä¹Ÿé€‚ç”¨å•Šï¼Œä½†æ˜¯å†ä»”ç»†ä¸€æƒ³ï¼Œå·¦ä¾§æ”¹å˜äº†æœ‰å¯èƒ½å¯¼è‡´å³ä¾§ç­›é€‰æ¡ä»¶å®½åº¦ä¸å¤Ÿè€Œæ¢è¡Œï¼Œä¸€æ¢è¡Œç­›é€‰æ¡ä»¶çš„é«˜åº¦å°±æ”¹å˜äº†ï¼Œè¿™æ—¶å€™æ˜¯éœ€è¦é‡æ–°è®¡ç®—é«˜åº¦çš„ï¼Œä½†æ˜¯ä¸Šé¢ç›‘å¬çš„ä»£ç åªç›‘å¬çª—å£å¤§å°æ”¹å˜ï¼Œè€Œç°åœ¨çš„æƒ…å†µçª—å£çš„å¤§å°å¹¶æ²¡æœ‰è¢«æ”¹å˜ï¼Œåªæ˜¯ div çš„å®½åº¦å‘ç”Ÿäº†å˜åŒ–ï¼Œåæ¥æˆ‘ google äº†ä¸€åœˆï¼Œå‘ç°äº† <a href="https://github.com/marcj/css-element-queries">css-element-queries</a> è¿™ä¸ªåº“ä¸­çš„ <code>ResizeSensor</code>  è¿™ä¸ªç±»å¯ä»¥å®ç°å¯¹å…ƒç´ å¤§å°æ”¹å˜çš„ç›‘å¬ï¼Œä½¿ç”¨æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * element éœ€è¦ç›‘å¬çš„å…ƒç´ </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">new</span> ResizeSensor(element, () =&gt; &#123;</span><br><span class="line"><span class="comment">//callback</span></span><br><span class="line">  <span class="comment">//é‡æ–°è®¡ç®—é«˜åº¦</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å¹¶ä¸”åœ¨è¿™æ¬¡è°ƒæ•´çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘æƒ³åˆ°äº†ç”¨ flex å±æ€§æ¥è®©å³ä¾§çš„ç­›é€‰æ¡ä»¶è·Ÿ table è‡ªè¡Œåˆ†é…ç©ºé—´ï¼Œå› ä¸ºè¿™ç±»è¡¨æ ¼çš„é¡µé¢ç»“æ„åŸºæœ¬æ˜¯å›ºå®šçš„ï¼Œä¸Šé¢æ˜¯ç­›é€‰æ¡ä»¶ï¼Œä¸‹é¢æ˜¯è¡¨æ ¼ï¼Œäºæ˜¯æˆ‘å°è£…äº†ä¸€ä¸ª  <code>&lt;form-page&gt;</code> ç»„ä»¶ï¼Œç»“æ„å°±æ˜¯å¤§æ¦‚ æ˜¯è¿™æ ·ï¼š</p><p><img src="https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-04-14-141421.png" alt></p><p>è¿™ä¸ªç»“æ„ä¸‹ï¼Œæˆ‘å°±ä¸ç”¨å†å»å…³å¿ƒé™¤äº†ç­›é€‰æ¡ä»¶çš„é«˜åº¦å¤–æˆ‘è¿˜éœ€è¦å‡å»å¤šå°‘çš„é¢å¤–é«˜åº¦ï¼Œæˆ‘åªè¦å…³å¿ƒæˆ‘çš„ table slot åŒºåŸŸæœ‰å¤šå°‘é«˜åº¦ï¼Œæˆ‘å°±æŠŠ table è®¾ä¸ºå¤šå°‘é«˜åº¦å°±å¯ä»¥äº†ã€‚</p><p>å½“ç„¶å†…å®¹å±•ç¤ºåŒºåŸŸçš„é«˜åº¦æ˜¯éœ€è¦è®¡ç®—è¿‡çš„ï¼Œä½†æ˜¯è¿™ä¸ªåªè¦åœ¨å…¨å±€æ ·å¼ä¸­ç”¨ <code>calc</code> è®¡ç®—ä¸€æ¬¡é«˜åº¦å°±å¯ä»¥äº†ã€‚</p><p>ä¸‹é¢æ˜¯ demo çš„æ¼”ç¤ºæ•ˆæœï¼š</p><video src="https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-04-14-element-ui-table-auto-height.mp4" style="width: 100%" controls></video><p><a href="https://github.com/Tit1e/element-ui-table-auto-height">demo æºç </a></p><p><strong>2020å¹´8æœˆ27æ—¥æ›´æ–°ï¼š</strong></p><p>ç›®å‰ 2.13 ç‰ˆæœ¬çš„ table å·²ç»æ”¯æŒheight=â€œ100%â€ï¼Œæ‰€ä»¥å¯ä»¥æ”¾å¼ƒä¸Šé¢çš„å®ç°æ–¹å¼äº†ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;å·¥ä½œä¸­ç”±äºå…¬å¸ä¸šåŠ¡éœ€è¦ï¼Œè¦æ±‚ table åšåˆ°æ•´ä¸ª table å§‹ç»ˆèƒ½åœ¨é¡µé¢ä¸Šå®Œå…¨æ˜¾ç¤ºï¼Œ head å›ºå®šï¼Œbody è¶…å‡ºæ»šåŠ¨ï¼Œç”±äºå…¬å¸ä½¿ç”¨çš„æ˜¯ element-uiï¼Œel-table ç»„ä»¶æä¾›äº† height å±æ€§ï¼Œä½†æ˜¯è¿™ä¸ªå±æ€§çš„å€¼å¿…é¡»æ˜¯å…·ä½“çš„åƒç´ ï¼Œå› æ­¤ï¼Œå½“é¡µé¢çš„çª—å£å¤§å°å‘
      
    
    </summary>
    
    
      <category term="å­¦ä¹ " scheme="https://github.com/Tit1e/tags/%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>AppleScript åˆå°è¯•</title>
    <link href="https://github.com/Tit1e/2020/03/14/127-appleScript-Thunder/"/>
    <id>https://github.com/Tit1e/2020/03/14/127-appleScript-Thunder/</id>
    <published>2020-03-14T02:15:48.000Z</published>
    <updated>2020-03-14T02:59:04.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¿…é›·æœ‰æ—¶å€™ä¼šå‡ºç°åˆšå¼€å§‹ä¸‹è½½çš„æ—¶å€™é€Ÿåº¦å¾ˆå¿«ï¼Œä½†æ˜¯è¿‡å‡ åç§’ï¼Œé€Ÿåº¦å°±åªæœ‰å‡ å kb çš„æƒ…å†µã€‚æ­£å¸¸ä¸‹è½½å¤ªæ…¢ï¼Œå¾ªç¯æš‚åœå¯åŠ¨æ–¹æ³•å€’æ˜¯å¯ä»¥ï¼Œä½†æ˜¯æˆ‘æ€»ä¸èƒ½ä»€ä¹ˆéƒ½ä¸åšå°±å…‰åç”µè„‘å‰ä¸åœç‚¹å¼€å§‹ä»»åŠ¡ï¼Œæš‚åœä»»åŠ¡å§ï¼Ÿå†µä¸”æˆ‘ä¸€èˆ¬éƒ½æ˜¯ç¡è§‰çš„æ—¶å€™æŒ‚ç€è¿…é›·ã€‚</p><p>æƒ³èµ·ä»¥å‰åœ¨ç”¨ windows çš„æ—¶å€™æ¥è§¦è¿‡æŒ‰é”®ç²¾çµè¿™ç±»æ¨¡æ‹Ÿé”®é¼ æ“ä½œçš„è½¯ä»¶ï¼Œæˆ‘è§‰å¾— Mac OS å¹³å°åº”è¯¥ä¹Ÿæœ‰ç±»ä¼¼çš„è½¯ä»¶ï¼Œä½†æ˜¯ä¸€åœˆæœä¸‹æ¥å¹¶æ²¡æœ‰æ‰¾åˆ°ï¼Œå€’æ˜¯æ‰¾åˆ°äº†å®˜æ–¹çš„è„šæœ¬è¯­è¨€ AppleScriptã€‚å®ƒå€’æ˜¯å¯ä»¥æ¨¡æ‹Ÿé”®é¼ æ“ä½œï¼Œåªæ˜¯å¾—è‡ªå·±æŠ˜è…¾ã€‚</p><p>é‚£æˆ‘èƒ½æ€•æŠ˜è…¾ä¹ˆï¼Ÿäºæ˜¯ç›´æ¥å¼€å¹²ï¼Œè¾¹åœ¨<a href="applescript://" target="_blank" rel="noopener">è„šæœ¬ç¼–è¾‘å™¨</a>æµ‹è¯•è¾¹ Googleï¼Œæ²¡å¤šä¹…æŠ˜è…¾å‡ºæ¥äº†ä¸ªèƒ½å°†å°±ç”¨çš„ã€‚åæ¥æˆ‘åˆ</p><p>ä¼˜åŒ–äº†ä¸€ä¸‹ï¼Œå¹¶ä¸”é›†æˆåˆ°äº† Alfred ä¸­ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">// å¦‚æœç›´æ¥ç”¨è„šæœ¬ç¼–è¾‘å™¨æ‰§è¡Œï¼Œä¸éœ€è¦ç¬¬ä¸€è¡Œä¸æœ€åè¡Œï¼Œè¿™æ˜¯è¦åœ¨ Alfred ä¸­æ‰§è¡Œæ‰éœ€è¦çš„ã€‚</span><br><span class="line">on alfred_script(q)</span><br><span class="line">  tell application "System Events"</span><br><span class="line">tell application "Thunder"</span><br><span class="line"><span class="comment">--æ¿€æ´»ä¸»çª—å£</span></span><br><span class="line">activate</span><br><span class="line"><span class="keyword">end</span> tell</span><br><span class="line"><span class="comment">--æš‚åœä¸€ç§’</span></span><br><span class="line">delay <span class="number">1</span></span><br><span class="line"><span class="comment">--å…¨é€‰ä»»åŠ¡ï¼Œå› åªæœ‰é€‰ä¸­æ‰èƒ½æš‚åœå¼€å§‹ä»»åŠ¡</span></span><br><span class="line"><span class="keyword">key</span> code <span class="number">0</span> <span class="keyword">using</span> &#123;command down&#125;</span><br><span class="line">tell process <span class="string">"Thunder"</span></span><br><span class="line">tell <span class="keyword">window</span> <span class="string">"è¿…é›·"</span></span><br><span class="line">entire <span class="keyword">contents</span></span><br><span class="line"><span class="comment">--q æ˜¯ä¼ è¿›æ¥çš„å‚æ•°ï¼Œè¡¨ç¤ºå¾ªç¯æ¬¡æ•°</span></span><br><span class="line"><span class="comment">--æœ¬ä»£ç ä¸­ä¸€æ¬¡å¾ªç¯ç”¨æ—¶ 20 + 2 ç§’ï¼Œå¯æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´</span></span><br><span class="line"><span class="comment">--q çš„æ¬¡æ•°æ ¹æ®æ¯æ¬¡å¾ªç¯çš„æ—¶é•¿æ¥è®¡ç®—</span></span><br><span class="line"><span class="keyword">repeat</span> q times</span><br><span class="line"><span class="comment">--ç­‰å¾…20ç§’åæš‚åœä»»åŠ¡</span></span><br><span class="line">delay <span class="number">20</span></span><br><span class="line">click button <span class="number">7</span></span><br><span class="line"><span class="comment">--æš‚åœ2ç§’åé‡æ–°å¼€å§‹ä»»åŠ¡</span></span><br><span class="line">delay <span class="number">2</span></span><br><span class="line">click button <span class="number">6</span></span><br><span class="line"><span class="keyword">end</span> <span class="keyword">repeat</span></span><br><span class="line"><span class="keyword">end</span> tell</span><br><span class="line"><span class="keyword">end</span> tell</span><br><span class="line"><span class="keyword">end</span> tell</span><br><span class="line"><span class="keyword">end</span> alfred_script</span><br></pre></td></tr></table></figure><p>åœ¨é›†æˆåˆ° Alfred çš„è¿‡ç¨‹ä¸­è¸©äº†ä¸ªå‘ï¼Œå°±æ˜¯ä¼ å‚é—®é¢˜ï¼Œæˆ‘ä¹‹å‰ä¸€ç›´ç”¨ <code>{query}</code> æ¥è·å–ä¼ è¿‡æ¥çš„å‚æ•°ï¼Œä½†æ˜¯ä¸€ç›´ä¸æˆåŠŸï¼ŒæŸ¥äº†ååŸæ¥è¿™è¦ç›´æ¥ç”¨ <code>q</code> å°±è¡Œäº†ã€‚å…¶å®åœ¨è„šæœ¬ç¬¬ä¸€è¡Œå·²ç»è¯´æ˜ï¼Œä½†æˆ‘ä¸€ç›´ä»¥ä¸ºæ˜¯å›ºå®šæ ¼å¼ã€‚</p><p>ä¹‹åæˆ‘å‘ç°ä½¿ç”¨ AppleScript è¿˜æœ‰ä¸ªå¥½å¤„å°±æ˜¯è„šæœ¬æ‰§è¡Œçš„æ—¶å€™å¯ä»¥ä¸ä¿æŒçª—å£æœ€å‰ï¼š</p><p><img src="https://personal-1251959693.cos.ap-chengdu.myqcloud.com/2020-03-14-%E5%B1%8F%E5%B9%95%E5%BD%95%E5%88%B6%202020-03-14%2010.47.37.gif" alt></p><p>ç”±äº AppleScript çš„èµ„æ–™å¤ªå°‘äº†ï¼Œå®˜æ–¹æ–‡æ¡£ä¹Ÿå¾ˆç®€å•ï¼Œæ²¡æœ‰å®ç°æˆ‘æƒ³è¦çš„æ•ˆæœã€‚å…¶å®æˆ‘æœ¬æ¥çš„é€»è¾‘æ˜¯æ¯æ¬¡å¾ªç¯å‰å…ˆåˆ¤æ–­ä¸‹è½½åˆ—è¡¨ä¸­æœ‰æ²¡æœ‰ä»»åŠ¡ï¼Œæœ‰çš„è¯å°±æ‰§è¡Œï¼Œæ²¡æœ‰å°±é€€å‡ºå¾ªç¯ã€‚ä½†æ˜¯ç›®å‰è¿˜æ²¡æ‰¾åˆ°è·å–çš„æ–¹æ³•ï¼Œæ‰€ä»¥åªèƒ½å…ˆå°†å°±ä¸€ä¸‹ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;è¿…é›·æœ‰æ—¶å€™ä¼šå‡ºç°åˆšå¼€å§‹ä¸‹è½½çš„æ—¶å€™é€Ÿåº¦å¾ˆå¿«ï¼Œä½†æ˜¯è¿‡å‡ åç§’ï¼Œé€Ÿåº¦å°±åªæœ‰å‡ å kb çš„æƒ…å†µã€‚æ­£å¸¸ä¸‹è½½å¤ªæ…¢ï¼Œå¾ªç¯æš‚åœå¯åŠ¨æ–¹æ³•å€’æ˜¯å¯ä»¥ï¼Œä½†æ˜¯æˆ‘æ€»ä¸èƒ½ä»€ä¹ˆéƒ½ä¸åšå°±å…‰åç”µè„‘å‰ä¸åœç‚¹å¼€å§‹ä»»åŠ¡ï¼Œæš‚åœä»»åŠ¡å§ï¼Ÿå†µä¸”æˆ‘ä¸€èˆ¬éƒ½æ˜¯ç¡è§‰çš„æ—¶å€™æŒ‚ç€è¿…é›·ã€‚&lt;/p&gt;
&lt;p&gt;æƒ³èµ·ä»¥å‰åœ¨ç”¨ windows çš„æ—¶å€™
      
    
    </summary>
    
    
      <category term="æŠ˜è…¾" scheme="https://github.com/Tit1e/tags/%E6%8A%98%E8%85%BE/"/>
    
  </entry>
  
  <entry>
    <title>é˜»æ­¢è¡¨å•åªæœ‰ä¸€ä¸ª input æ—¶å›è½¦è‡ªåŠ¨æäº¤</title>
    <link href="https://github.com/Tit1e/2020/03/08/126-form-single-input/"/>
    <id>https://github.com/Tit1e/2020/03/08/126-form-single-input/</id>
    <published>2020-03-08T07:13:44.000Z</published>
    <updated>2020-03-08T07:35:45.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä¹‹å‰åœ¨å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°è¿‡è¿™ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å½“ä¸€ä¸ªè¡¨å•ä¸­åªæœ‰ä¸€ä¸ª input æ—¶ï¼Œenter ä¼šç›´æ¥æäº¤è¡¨å•ã€‚å½“åˆæˆ‘ç”¨çš„æ˜¯ Element-UI  çš„è¡¨å•ç»„ä»¶ï¼Œæœ¬æ¥æˆ‘ä»¥ä¸ºæ˜¯ Element-UIçš„é—®é¢˜ï¼Œåæ¥æŸ¥äº†åå‘ç°æ˜¯åŸç”Ÿè¡¨å•å°±æœ‰è¿™ä¸ªç‰¹æ€§ã€‚æˆ‘å½“æ—¶æ˜¯ä½¿ç”¨å¼‚æ­¥è¯·æ±‚çš„æ•°æ®ï¼Œå› æ­¤å¹¶ä¸éœ€è¦åŸç”Ÿçš„æäº¤ï¼Œæ‰€ä»¥åªæœ‰ä¸€ä¸ª input æ—¶å¾—æƒ³åŠæ³•é˜»æ­¢åŸç”Ÿçš„æäº¤åŠŸèƒ½ã€‚</p><p>Element-UI å› ä¸ºæ˜¯å°è£…è¿‡çš„ï¼Œå¯ä»¥ç”¨å®ƒè‡ªå·±çš„æ–¹æ³•æ¥è§£å†³ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- åªè¦åœ¨è¡¨å•å…ƒç´ ä¸ŠåŠ å…¥ @submit.native.prevent --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-form</span> @<span class="attr">submit.native.prevent</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åŸç”Ÿè¡¨å•çš„ç»„ç»‡æ–¹å¼æˆ‘ä¹ŸæŸ¥äº†ä¸€ä¸‹ï¼Œåœ¨è¿™æ€»ç»“ä¸€ä¸‹ï¼š</p><p>æ–¹æ³•ä¸€ï¼š</p><p>åœ¨è¡¨å•ä¸­å†åŠ å…¥ä¸€ä¸ªéšè—çš„ input</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">style</span>=<span class="string">"display: none;"</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ–¹æ³•äºŒï¼š</p><p>è¡¨å•æäº¤æ—¶é˜»æ­¢æäº¤</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">onsubmit</span>=<span class="string">"return false;"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ–¹æ³•ä¸‰ï¼š</p><p>ç›‘å¬ input  <code>keydown</code> äº‹ä»¶</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">onkeydown</span>=<span class="string">"if(event.keyCode === 13) &#123; return false &#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ä¹‹å‰åœ¨å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°è¿‡è¿™ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å½“ä¸€ä¸ªè¡¨å•ä¸­åªæœ‰ä¸€ä¸ª input æ—¶ï¼Œenter ä¼šç›´æ¥æäº¤è¡¨å•ã€‚å½“åˆæˆ‘ç”¨çš„æ˜¯ Element-UI  çš„è¡¨å•ç»„ä»¶ï¼Œæœ¬æ¥æˆ‘ä»¥ä¸ºæ˜¯ Element-UIçš„é—®é¢˜ï¼Œåæ¥æŸ¥äº†åå‘ç°æ˜¯åŸç”Ÿè¡¨å•å°±æœ‰è¿™ä¸ªç‰¹æ€§ã€‚æˆ‘å½“æ—¶æ˜¯ä½¿ç”¨å¼‚æ­¥è¯·æ±‚çš„æ•°æ®ï¼Œå› æ­¤å¹¶ä¸éœ€è¦åŸ
      
    
    </summary>
    
    
      <category term="å­¦ä¹ " scheme="https://github.com/Tit1e/tags/%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
</feed>
